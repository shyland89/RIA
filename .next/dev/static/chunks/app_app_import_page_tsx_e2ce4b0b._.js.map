{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/app/import/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\nimport Link from \"next/link\";\n\n// Inline constants to avoid any import chain issues\nconst INDUSTRY_CLUSTERS = [\n  \"Technology & Software\",\n  \"Financial Services\",\n  \"Professional Services\",\n  \"Healthcare & Life Sciences\",\n  \"Retail & E-commerce\",\n  \"Manufacturing & Industrial\",\n  \"Media & Advertising\",\n  \"Logistics & Transport\",\n  \"Construction & Real Estate\",\n  \"Hospitality & Travel\",\n  \"Public Sector & Education\",\n  \"Telecommunications\",\n  \"Energy & Utilities\",\n  \"Other\",\n] as const;\n\nconst SOURCE_GROUP_OPTIONS = [\n  { value: \"inbound\", label: \"Inbound\" },\n  { value: \"outbound\", label: \"Outbound\" },\n  { value: \"other\", label: \"Other\" },\n];\n\ntype UploadResult = {\n  headers: string[];\n  preview: Record<string, string>[];\n  totalRows: number;\n  filename: string;\n};\n\ntype ImportResult = {\n  jobId: string;\n  insertedCount: number;\n  errorCount: number;\n  skippedCount: number;\n  totalRows: number;\n  errors: {\n    row_number: number;\n    error_message: string;\n    raw_row_json: Record<string, string>;\n  }[];\n  enrichmentMapping?: {\n    industry: Record<string, string>;\n    source: Record<string, string>;\n  };\n};\n\ntype ImportJob = {\n  id: string;\n  filename: string;\n  status: string;\n  row_count: number;\n  inserted_count: number;\n  error_count: number;\n  skipped_count: number;\n  is_active: boolean;\n  import_mode: string;\n  created_at: string;\n  started_at: string | null;\n  completed_at: string | null;\n};\n\ntype EnrichmentMapping = {\n  industry: Record<string, string>;\n  source: Record<string, string>;\n};\n\nconst NOT_PROVIDED = \"__not_provided__\";\nconst NULL_TOKENS = [\"na\", \"n/a\", \"null\", \"none\", \"-\", \"\"];\n\nconst TARGET_FIELDS = [\n  { key: \"name\", label: \"Name\", required: true },\n  { key: \"amount\", label: \"Amount\", required: true },\n  { key: \"outcome\", label: \"Outcome\", required: true },\n  { key: \"role\", label: \"Champion Role\", required: false },\n  { key: \"industry\", label: \"Industry\", required: false },\n  { key: \"source\", label: \"Source\", required: false },\n  { key: \"created_at\", label: \"Created At\", required: false, isDate: true },\n  { key: \"closed_date\", label: \"Closed Date\", required: false, isDate: true },\n  { key: \"pipeline_accepted_date\", label: \"Pipeline Accepted Date\", required: false, isDate: true },\n  { key: \"segment\", label: \"Segment\", required: false },\n  { key: \"country\", label: \"Country\", required: false },\n];\n\ntype Step = \"upload\" | \"mapping\" | \"enrichment\" | \"importing\" | \"results\";\n\nfunction extractUniqueValuesFromPreview(\n  preview: Record<string, string>[],\n  columnName: string\n): string[] {\n  const seen = new Set<string>();\n  for (const row of preview) {\n    const val = row[columnName]?.trim();\n    if (val && !NULL_TOKENS.includes(val.toLowerCase())) {\n      seen.add(val);\n    }\n  }\n  return Array.from(seen).sort();\n}\n\nexport default function ImportPage() {\n  const [step, setStep] = useState<Step>(\"upload\");\n  const [file, setFile] = useState<File | null>(null);\n  const [uploadResult, setUploadResult] = useState<UploadResult | null>(null);\n  const [mapping, setMapping] = useState<Record<string, string>>({});\n  const [importResult, setImportResult] = useState<ImportResult | null>(null);\n  const [error, setError] = useState<string>(\"\");\n  const [uploading, setUploading] = useState(false);\n  const [importing, setImporting] = useState(false);\n  const [importMode, setImportMode] = useState<\"append\" | \"replace\">(\"append\");\n  const [showReplaceConfirm, setShowReplaceConfirm] = useState(false);\n  const [importHistory, setImportHistory] = useState<ImportJob[]>([]);\n  const [historyLoading, setHistoryLoading] = useState(true);\n\n  // Enrichment state\n  const [enrichmentMapping, setEnrichmentMapping] = useState<EnrichmentMapping>({\n    industry: {},\n    source: {},\n  });\n  const [enrichmentLoading, setEnrichmentLoading] = useState(false);\n  const [enrichmentClassified, setEnrichmentClassified] = useState(false);\n  // Unique raw values extracted from preview for the mapping UI\n  const [uniqueIndustries, setUniqueIndustries] = useState<string[]>([]);\n  const [uniqueSources, setUniqueSources] = useState<string[]>([]);\n\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    fetchHistory();\n  }, []);\n\n  async function fetchHistory() {\n    setHistoryLoading(true);\n    try {\n      const res = await fetch(\"/api/import/jobs\");\n      if (res.ok) {\n        const data = await res.json();\n        setImportHistory(data.jobs || []);\n      }\n    } catch {}\n    setHistoryLoading(false);\n  }\n\n  async function handleUpload() {\n    if (!file) return;\n    setError(\"\");\n    setUploading(true);\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n      const res = await fetch(\"/api/import/upload\", { method: \"POST\", body: formData });\n      const data = await res.json();\n      if (!res.ok) {\n        setError(data.error || \"Upload failed\");\n        setUploading(false);\n        return;\n      }\n      setUploadResult(data);\n      const autoMapping: Record<string, string> = {};\n      for (const field of TARGET_FIELDS) {\n        const match = data.headers.find(\n          (h: string) => h.toLowerCase().replace(/[_\\s-]/g, \"\") === field.key.replace(/_/g, \"\")\n        );\n        if (match) autoMapping[field.key] = match;\n      }\n      setMapping(autoMapping);\n      setStep(\"mapping\");\n    } catch {\n      setError(\"Failed to upload file. Please try again.\");\n    } finally {\n      setUploading(false);\n    }\n  }\n\n  function handleMappingChange(targetField: string, csvHeader: string) {\n    setMapping((prev) => ({ ...prev, [targetField]: csvHeader }));\n  }\n\n  function isMappingValid(): boolean {\n    const requiredOk = TARGET_FIELDS.filter((f) => f.required).every(\n      (f) => mapping[f.key] && mapping[f.key] !== \"\" && mapping[f.key] !== NOT_PROVIDED\n    );\n    const dateFields = TARGET_FIELDS.filter((f) => (f as any).isDate);\n    const hasAtLeastOneDate = dateFields.some(\n      (f) => mapping[f.key] && mapping[f.key] !== \"\" && mapping[f.key] !== NOT_PROVIDED\n    );\n    return requiredOk && hasAtLeastOneDate;\n  }\n\n  function getMappingWarnings(): string[] {\n    const warnings: string[] = [];\n    const dateFields = TARGET_FIELDS.filter((f) => (f as any).isDate);\n    const hasDate = dateFields.some(\n      (f) => mapping[f.key] && mapping[f.key] !== \"\" && mapping[f.key] !== NOT_PROVIDED\n    );\n    if (!hasDate)\n      warnings.push(\n        \"At least one date field (Created At, Closed Date, or Pipeline Accepted Date) is required.\"\n      );\n    return warnings;\n  }\n\n  // ─── Proceed to enrichment step ───────────────────────────────────────────\n\n  async function handleProceedToEnrichment() {\n    if (!uploadResult) return;\n\n    const hasIndustry =\n      mapping.industry && mapping.industry !== \"\" && mapping.industry !== NOT_PROVIDED;\n    const hasSource =\n      mapping.source && mapping.source !== \"\" && mapping.source !== NOT_PROVIDED;\n\n    // If neither field mapped, skip enrichment entirely\n    if (!hasIndustry && !hasSource) {\n      doImport();\n      return;\n    }\n\n    // Extract unique values from preview to populate the UI immediately\n    const industries = hasIndustry\n      ? extractUniqueValuesFromPreview(uploadResult.preview, mapping.industry)\n      : [];\n    const sources = hasSource\n      ? extractUniqueValuesFromPreview(uploadResult.preview, mapping.source)\n      : [];\n\n    setUniqueIndustries(industries);\n    setUniqueSources(sources);\n\n    // Initialise mapping with empty strings so the UI shows all rows\n    const initialIndustry: Record<string, string> = {};\n    for (const i of industries) initialIndustry[i] = \"Other\";\n\n    const initialSource: Record<string, string> = {};\n    for (const s of sources) initialSource[s] = \"other\";\n\n    setEnrichmentMapping({ industry: initialIndustry, source: initialSource });\n    setEnrichmentClassified(false);\n    setStep(\"enrichment\");\n\n    // Try to auto-classify in background — UI is already usable without it\n    if (industries.length > 0 || sources.length > 0) {\n      setEnrichmentLoading(true);\n      try {\n        const res = await fetch(\"/api/import/classify\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ industries, sources }),\n        });\n        if (res.ok) {\n          const data = await res.json();\n          setEnrichmentMapping(data.enrichmentMapping);\n          setEnrichmentClassified(true);\n        }\n        // If classification fails, the user still has the default mapping to work with\n      } catch {\n        // Silent — user can adjust the defaults manually\n      } finally {\n        setEnrichmentLoading(false);\n      }\n    }\n  }\n\n  function updateIndustryCluster(rawValue: string, newCluster: string) {\n    setEnrichmentMapping((prev) => ({\n      ...prev,\n      industry: { ...prev.industry, [rawValue]: newCluster },\n    }));\n  }\n\n  function updateSourceGroup(rawValue: string, newGroup: string) {\n    setEnrichmentMapping((prev) => ({\n      ...prev,\n      source: { ...prev.source, [rawValue]: newGroup },\n    }));\n  }\n\n  // ──────────────────────────────────────────────────────────────────────────\n\n  function handleImportClick() {\n    if (importMode === \"replace\") setShowReplaceConfirm(true);\n    else doImport();\n  }\n\n  async function doImport() {\n    if (!file || !uploadResult) return;\n    setError(\"\");\n    setImporting(true);\n    setStep(\"importing\");\n    setShowReplaceConfirm(false);\n    try {\n      const cleanMapping: Record<string, string> = {};\n      for (const [key, val] of Object.entries(mapping)) {\n        if (val && val !== \"\" && val !== NOT_PROVIDED) cleanMapping[key] = val;\n      }\n      const formData = new FormData();\n      formData.append(\"file\", file);\n      formData.append(\"mapping\", JSON.stringify(cleanMapping));\n      formData.append(\"enrichment_mapping\", JSON.stringify(enrichmentMapping));\n      formData.append(\"mode\", importMode);\n      const res = await fetch(\"/api/import/execute\", { method: \"POST\", body: formData });\n      const data = await res.json();\n      if (!res.ok) {\n        setError(data.error || \"Import failed\");\n        setStep(\"mapping\");\n        setImporting(false);\n        return;\n      }\n      setImportResult(data);\n      setStep(\"results\");\n      fetchHistory();\n    } catch {\n      setError(\"Import failed. Please try again.\");\n      setStep(\"mapping\");\n    } finally {\n      setImporting(false);\n    }\n  }\n\n  function handleReset() {\n    setStep(\"upload\");\n    setFile(null);\n    setUploadResult(null);\n    setMapping({});\n    setImportResult(null);\n    setError(\"\");\n    setImportMode(\"append\");\n    setEnrichmentMapping({ industry: {}, source: {} });\n    setEnrichmentClassified(false);\n    setUniqueIndustries([]);\n    setUniqueSources([]);\n    if (fileInputRef.current) fileInputRef.current.value = \"\";\n  }\n\n  const selectStyle = {\n    border: \"1px solid var(--stone-200)\",\n    borderRadius: \"var(--radius-sm, 6px)\",\n    color: \"var(--stone-700)\",\n    background: \"var(--stone-50)\",\n  };\n\n  const isEnrichmentStep = step === \"enrichment\";\n  const isDoneStep = step === \"importing\" || step === \"results\";\n\n  return (\n    <div className=\"min-h-screen\" style={{ background: \"var(--stone-50)\" }}>\n      <main style={{ padding: \"28px 40px 60px\" }}>\n        <div className=\"mb-8\">\n          <h1\n            className=\"text-[22px] font-bold tracking-tight\"\n            style={{ color: \"var(--stone-900)\", letterSpacing: \"-0.3px\" }}\n          >\n            Import Opportunities\n          </h1>\n          <p className=\"text-sm mt-1\" style={{ color: \"var(--stone-500)\" }}>\n            Upload a CSV file to import opportunities into your organization.\n          </p>\n        </div>\n\n        {/* Progress Steps */}\n        <div className=\"flex items-center gap-0 mb-8 pt-2\" data-testid=\"progress-steps\">\n          <StepIndicator label=\"Upload\" active={step === \"upload\"} done={step !== \"upload\"} num={1} />\n          <StepDivider done={step !== \"upload\"} />\n          <StepIndicator\n            label=\"Map Columns\"\n            active={step === \"mapping\"}\n            done={isEnrichmentStep || isDoneStep}\n            num={2}\n          />\n          <StepDivider done={isEnrichmentStep || isDoneStep} />\n          <StepIndicator\n            label=\"Review Groups\"\n            active={step === \"enrichment\"}\n            done={isDoneStep}\n            num={3}\n          />\n          <StepDivider done={isDoneStep} />\n          <StepIndicator\n            label=\"Import\"\n            active={step === \"importing\" || step === \"results\"}\n            done={step === \"results\"}\n            num={4}\n          />\n        </div>\n\n        {error && (\n          <div\n            className=\"mb-6 px-4 py-3 text-sm\"\n            style={{\n              border: \"1px solid #fca5a5\",\n              background: \"var(--error-bg)\",\n              color: \"var(--error)\",\n              borderRadius: \"var(--radius-md, 10px)\",\n            }}\n            data-testid=\"text-error\"\n          >\n            {error}\n          </div>\n        )}\n\n        {/* Step 1: Upload */}\n        {step === \"upload\" && (\n          <div\n            className=\"bg-white\"\n            style={{\n              border: \"1px solid var(--stone-200)\",\n              borderRadius: \"var(--radius-lg, 14px)\",\n              overflow: \"hidden\",\n            }}\n            data-testid=\"section-upload\"\n          >\n            <div className=\"p-6\">\n              <h2 className=\"text-sm font-semibold mb-4\" style={{ color: \"var(--stone-900)\" }}>\n                Select CSV file\n              </h2>\n              <p className=\"text-sm mb-4\" style={{ color: \"var(--stone-500)\" }}>\n                Your CSV must include columns for: name, amount, outcome, and at least one date\n                (created_at, closed_date, or pipeline_accepted_date). Other columns are optional.\n              </p>\n              <p className=\"text-xs mb-4\" style={{ color: \"var(--stone-400)\" }}>\n                Values like &quot;NA&quot;, &quot;N/A&quot;, &quot;null&quot;, &quot;none&quot;, or\n                empty cells are treated as missing data.\n              </p>\n              <label\n                className=\"block cursor-pointer transition-colors mb-4\"\n                style={{\n                  border: \"2px dashed var(--stone-300)\",\n                  borderRadius: \"var(--radius-lg, 14px)\",\n                  padding: \"56px 40px\",\n                  textAlign: \"center\",\n                  background: file ? \"var(--teal-50)\" : \"var(--stone-50)\",\n                  borderColor: file ? \"var(--teal-400)\" : \"var(--stone-300)\",\n                }}\n              >\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\".csv\"\n                  onChange={(e) => setFile(e.target.files?.[0] || null)}\n                  className=\"hidden\"\n                  data-testid=\"input-file\"\n                />\n                <div\n                  className=\"w-12 h-12 mx-auto mb-4 rounded-full flex items-center justify-center\"\n                  style={{ background: \"var(--teal-100)\" }}\n                >\n                  <svg\n                    className=\"w-5 h-5\"\n                    style={{ color: \"var(--teal-600)\" }}\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                    strokeWidth={2}\n                  >\n                    <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\" />\n                    <polyline points=\"17 8 12 3 7 8\" />\n                    <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\" />\n                  </svg>\n                </div>\n                {file ? (\n                  <p className=\"text-[15px] font-semibold\" style={{ color: \"var(--stone-900)\" }}>\n                    {file.name}\n                  </p>\n                ) : (\n                  <>\n                    <p\n                      className=\"text-[15px] font-semibold mb-1\"\n                      style={{ color: \"var(--stone-900)\" }}\n                    >\n                      Drop your CSV here or{\" \"}\n                      <span style={{ color: \"var(--teal-600)\" }}>browse</span>\n                    </p>\n                    <p className=\"text-[13px]\" style={{ color: \"var(--stone-500)\" }}>\n                      CSV files up to 10 MB\n                    </p>\n                  </>\n                )}\n              </label>\n              <button\n                onClick={handleUpload}\n                disabled={!file || uploading}\n                className=\"inline-flex items-center px-5 py-2.5 text-[13px] font-semibold text-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                style={{ background: \"var(--teal-600)\", borderRadius: \"var(--radius-sm, 6px)\" }}\n                data-testid=\"button-upload\"\n              >\n                {uploading ? \"Parsing...\" : \"Upload & Preview\"}\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Step 2: Column Mapping */}\n        {step === \"mapping\" && uploadResult && (\n          <div className=\"space-y-6\">\n            <div\n              className=\"bg-white\"\n              style={{\n                border: \"1px solid var(--stone-200)\",\n                borderRadius: \"var(--radius-lg, 14px)\",\n                overflow: \"hidden\",\n              }}\n              data-testid=\"section-mapping\"\n            >\n              <div className=\"p-6\">\n                <div className=\"flex items-center justify-between gap-4 flex-wrap mb-4\">\n                  <h2 className=\"text-sm font-semibold\" style={{ color: \"var(--stone-900)\" }}>\n                    Column Mapping\n                  </h2>\n                  <span\n                    className=\"text-xs\"\n                    style={{ color: \"var(--stone-500)\" }}\n                    data-testid=\"text-file-info\"\n                  >\n                    {uploadResult.filename} — {uploadResult.totalRows} rows\n                  </span>\n                </div>\n                <p className=\"text-sm mb-2\" style={{ color: \"var(--stone-500)\" }}>\n                  Map each CSV column to the corresponding opportunity field.\n                </p>\n                <p className=\"text-xs mb-4\" style={{ color: \"var(--stone-400)\" }}>\n                  Optional fields can be set to &quot;Not provided&quot; if your CSV doesn&apos;t\n                  include them.\n                </p>\n                {getMappingWarnings().map((w, i) => (\n                  <div\n                    key={i}\n                    className=\"mb-3 px-3 py-2 text-xs\"\n                    style={{\n                      border: \"1px solid #fcd34d\",\n                      background: \"var(--warning-bg)\",\n                      color: \"var(--warning)\",\n                      borderRadius: \"var(--radius-sm, 6px)\",\n                    }}\n                    data-testid={`mapping-warning-${i}`}\n                  >\n                    {w}\n                  </div>\n                ))}\n                <div className=\"grid gap-3 sm:grid-cols-2\">\n                  {TARGET_FIELDS.map((field) => (\n                    <div key={field.key} className=\"flex flex-col gap-1\">\n                      <label\n                        className=\"text-xs font-semibold\"\n                        style={{ color: \"var(--stone-700)\" }}\n                      >\n                        {field.label}\n                        {field.required && (\n                          <span style={{ color: \"var(--error)\" }} className=\"ml-0.5\">\n                            *\n                          </span>\n                        )}\n                        {!field.required && (\n                          <span\n                            className=\"font-normal ml-1\"\n                            style={{ color: \"var(--stone-400)\" }}\n                          >\n                            (optional)\n                          </span>\n                        )}\n                      </label>\n                      <select\n                        value={mapping[field.key] || \"\"}\n                        onChange={(e) => handleMappingChange(field.key, e.target.value)}\n                        className=\"px-3 py-2 text-sm font-medium\"\n                        style={selectStyle}\n                        data-testid={`select-mapping-${field.key}`}\n                      >\n                        <option value=\"\">— Select column —</option>\n                        {!field.required && (\n                          <option value={NOT_PROVIDED}>Not provided</option>\n                        )}\n                        {uploadResult.headers.map((h) => (\n                          <option key={h} value={h}>\n                            {h}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n\n            {/* Import Mode */}\n            <div\n              className=\"bg-white\"\n              style={{\n                border: \"1px solid var(--stone-200)\",\n                borderRadius: \"var(--radius-lg, 14px)\",\n                overflow: \"hidden\",\n              }}\n              data-testid=\"section-import-mode\"\n            >\n              <div className=\"p-6\">\n                <h2\n                  className=\"text-sm font-semibold mb-3\"\n                  style={{ color: \"var(--stone-900)\" }}\n                >\n                  Import Mode\n                </h2>\n                <div className=\"flex flex-col gap-3\">\n                  <label\n                    className=\"flex items-start gap-3 cursor-pointer\"\n                    data-testid=\"radio-mode-append\"\n                  >\n                    <input\n                      type=\"radio\"\n                      name=\"importMode\"\n                      value=\"append\"\n                      checked={importMode === \"append\"}\n                      onChange={() => setImportMode(\"append\")}\n                      className=\"mt-0.5\"\n                      style={{ accentColor: \"var(--teal-600)\" }}\n                    />\n                    <div>\n                      <p\n                        className=\"text-sm font-semibold\"\n                        style={{ color: \"var(--stone-900)\" }}\n                      >\n                        Append\n                      </p>\n                      <p className=\"text-xs\" style={{ color: \"var(--stone-500)\" }}>\n                        Add this data alongside your existing opportunities.\n                      </p>\n                    </div>\n                  </label>\n                  <label\n                    className=\"flex items-start gap-3 cursor-pointer\"\n                    data-testid=\"radio-mode-replace\"\n                  >\n                    <input\n                      type=\"radio\"\n                      name=\"importMode\"\n                      value=\"replace\"\n                      checked={importMode === \"replace\"}\n                      onChange={() => setImportMode(\"replace\")}\n                      className=\"mt-0.5\"\n                      style={{ accentColor: \"var(--teal-600)\" }}\n                    />\n                    <div>\n                      <p\n                        className=\"text-sm font-semibold\"\n                        style={{ color: \"var(--stone-900)\" }}\n                      >\n                        Replace\n                      </p>\n                      <p className=\"text-xs\" style={{ color: \"var(--stone-500)\" }}>\n                        Remove all existing opportunities and replace with this file.\n                      </p>\n                    </div>\n                  </label>\n                </div>\n              </div>\n            </div>\n\n            {/* Preview */}\n            <div\n              className=\"bg-white\"\n              style={{\n                border: \"1px solid var(--stone-200)\",\n                borderRadius: \"var(--radius-lg, 14px)\",\n                overflow: \"hidden\",\n              }}\n              data-testid=\"section-preview\"\n            >\n              <div className=\"p-6\">\n                <h2\n                  className=\"text-sm font-semibold mb-4\"\n                  style={{ color: \"var(--stone-900)\" }}\n                >\n                  Preview (first {Math.min(20, uploadResult.preview.length)} rows)\n                </h2>\n                <div className=\"overflow-x-auto\">\n                  <table className=\"min-w-full text-[13px]\">\n                    <thead>\n                      <tr style={{ borderBottom: \"1px solid var(--stone-200)\" }}>\n                        <th\n                          className=\"px-3 py-2.5 text-left text-[11px] font-semibold uppercase\"\n                          style={{\n                            color: \"var(--stone-500)\",\n                            letterSpacing: \"0.5px\",\n                            background: \"var(--stone-50)\",\n                          }}\n                        >\n                          #\n                        </th>\n                        {uploadResult.headers.map((h) => (\n                          <th\n                            key={h}\n                            className=\"px-3 py-2.5 text-left text-[11px] font-semibold uppercase whitespace-nowrap\"\n                            style={{\n                              color: \"var(--stone-500)\",\n                              letterSpacing: \"0.5px\",\n                              background: \"var(--stone-50)\",\n                            }}\n                          >\n                            {h}\n                          </th>\n                        ))}\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {uploadResult.preview.map((row, i) => (\n                        <tr key={i} style={{ borderBottom: \"1px solid var(--stone-100)\" }}>\n                          <td\n                            className=\"px-3 py-2.5 text-xs\"\n                            style={{ color: \"var(--stone-400)\" }}\n                          >\n                            {i + 1}\n                          </td>\n                          {uploadResult.headers.map((h) => (\n                            <td\n                              key={h}\n                              className=\"px-3 py-2.5 text-xs whitespace-nowrap max-w-[200px] truncate\"\n                              style={{ color: \"var(--stone-700)\" }}\n                            >\n                              {row[h] || \"\"}\n                            </td>\n                          ))}\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-3 flex-wrap\">\n              <button\n                onClick={handleReset}\n                className=\"inline-flex items-center px-5 py-2.5 text-[13px] font-semibold transition-colors\"\n                style={{\n                  background: \"#fff\",\n                  color: \"var(--stone-700)\",\n                  border: \"1px solid var(--stone-200)\",\n                  borderRadius: \"var(--radius-sm, 6px)\",\n                }}\n                data-testid=\"button-back-upload\"\n              >\n                Back\n              </button>\n              <button\n                onClick={handleProceedToEnrichment}\n                disabled={!isMappingValid()}\n                className=\"inline-flex items-center px-5 py-2.5 text-[13px] font-semibold text-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                style={{\n                  background: \"var(--teal-600)\",\n                  borderRadius: \"var(--radius-sm, 6px)\",\n                }}\n                data-testid=\"button-proceed-enrichment\"\n              >\n                Continue →\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Step 3: Enrichment Review */}\n        {step === \"enrichment\" && (\n          <div className=\"space-y-6\" data-testid=\"section-enrichment\">\n            {/* Header */}\n            <div\n              className=\"bg-white\"\n              style={{\n                border: \"1px solid var(--stone-200)\",\n                borderRadius: \"var(--radius-lg, 14px)\",\n              }}\n            >\n              <div className=\"p-6 flex items-start gap-3\">\n                <div\n                  className=\"inline-flex items-center justify-center w-8 h-8 rounded-md shrink-0 mt-0.5\"\n                  style={{ background: \"var(--teal-50)\" }}\n                >\n                  <svg\n                    className=\"w-4 h-4\"\n                    style={{ color: \"var(--teal-600)\" }}\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\"\n                    />\n                  </svg>\n                </div>\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-2\">\n                    <h2\n                      className=\"text-sm font-semibold\"\n                      style={{ color: \"var(--stone-900)\" }}\n                    >\n                      Review AI-Inferred Groups\n                    </h2>\n                    {enrichmentLoading && (\n                      <svg\n                        className=\"w-4 h-4 animate-spin\"\n                        style={{ color: \"var(--teal-600)\" }}\n                        fill=\"none\"\n                        viewBox=\"0 0 24 24\"\n                      >\n                        <circle\n                          className=\"opacity-25\"\n                          cx=\"12\"\n                          cy=\"12\"\n                          r=\"10\"\n                          stroke=\"currentColor\"\n                          strokeWidth=\"4\"\n                        />\n                        <path\n                          className=\"opacity-75\"\n                          fill=\"currentColor\"\n                          d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z\"\n                        />\n                      </svg>\n                    )}\n                    {!enrichmentLoading && enrichmentClassified && (\n                      <span\n                        className=\"text-[11px] font-semibold px-2 py-0.5 rounded-full\"\n                        style={{\n                          background: \"var(--teal-50)\",\n                          color: \"var(--teal-700)\",\n                          border: \"1px solid var(--teal-200)\",\n                        }}\n                      >\n                        AI classified\n                      </span>\n                    )}\n                    {!enrichmentLoading && !enrichmentClassified && (\n                      <span\n                        className=\"text-[11px] font-semibold px-2 py-0.5 rounded-full\"\n                        style={{\n                          background: \"var(--warning-bg)\",\n                          color: \"var(--warning)\",\n                          border: \"1px solid #fcd34d\",\n                        }}\n                      >\n                        Manual review\n                      </span>\n                    )}\n                  </div>\n                  <p className=\"text-xs mt-0.5\" style={{ color: \"var(--stone-500)\" }}>\n                    {enrichmentLoading\n                      ? \"Classifying your values — you can adjust once complete, or proceed now with the defaults.\"\n                      : enrichmentClassified\n                      ? \"Review and adjust the inferred groupings before importing.\"\n                      : \"Auto-classification unavailable. Assign groups manually below, or proceed with defaults.\"}\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            {/* Industry Cluster Mapping */}\n            {uniqueIndustries.length > 0 && (\n              <div\n                className=\"bg-white\"\n                style={{\n                  border: \"1px solid var(--stone-200)\",\n                  borderRadius: \"var(--radius-lg, 14px)\",\n                  overflow: \"hidden\",\n                }}\n                data-testid=\"section-industry-enrichment\"\n              >\n                <div\n                  className=\"px-6 py-4\"\n                  style={{ borderBottom: \"1px solid var(--stone-100)\" }}\n                >\n                  <h3\n                    className=\"text-sm font-semibold\"\n                    style={{ color: \"var(--stone-900)\" }}\n                  >\n                    Industry → Cluster\n                  </h3>\n                  <p className=\"text-xs mt-0.5\" style={{ color: \"var(--stone-500)\" }}>\n                    NACE-based groupings used for cross-segment analysis.\n                  </p>\n                </div>\n                <div className=\"divide-y\" style={{ borderColor: \"var(--stone-100)\" }}>\n                  {uniqueIndustries.map((raw) => (\n                    <div\n                      key={raw}\n                      className=\"flex items-center gap-4 px-6 py-3\"\n                      data-testid={`industry-row-${raw}`}\n                    >\n                      <span\n                        className=\"text-sm font-medium shrink-0 truncate\"\n                        style={{ color: \"var(--stone-900)\", width: \"200px\" }}\n                        title={raw}\n                      >\n                        {raw}\n                      </span>\n                      <svg\n                        className=\"w-4 h-4 shrink-0\"\n                        style={{ color: \"var(--stone-400)\" }}\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        viewBox=\"0 0 24 24\"\n                      >\n                        <path\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                          strokeWidth={2}\n                          d=\"M9 5l7 7-7 7\"\n                        />\n                      </svg>\n                      <select\n                        value={enrichmentMapping.industry[raw] || \"Other\"}\n                        onChange={(e) => updateIndustryCluster(raw, e.target.value)}\n                        className=\"flex-1 px-3 py-1.5 text-sm\"\n                        style={selectStyle}\n                        data-testid={`select-industry-cluster-${raw}`}\n                      >\n                        {INDUSTRY_CLUSTERS.map((c) => (\n                          <option key={c} value={c}>\n                            {c}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Source Group Mapping */}\n            {uniqueSources.length > 0 && (\n              <div\n                className=\"bg-white\"\n                style={{\n                  border: \"1px solid var(--stone-200)\",\n                  borderRadius: \"var(--radius-lg, 14px)\",\n                  overflow: \"hidden\",\n                }}\n                data-testid=\"section-source-enrichment\"\n              >\n                <div\n                  className=\"px-6 py-4\"\n                  style={{ borderBottom: \"1px solid var(--stone-100)\" }}\n                >\n                  <h3\n                    className=\"text-sm font-semibold\"\n                    style={{ color: \"var(--stone-900)\" }}\n                  >\n                    Source → Group\n                  </h3>\n                  <p className=\"text-xs mt-0.5\" style={{ color: \"var(--stone-500)\" }}>\n                    Inbound vs outbound classification for motion analysis.\n                  </p>\n                </div>\n                <div className=\"divide-y\" style={{ borderColor: \"var(--stone-100)\" }}>\n                  {uniqueSources.map((raw) => (\n                    <div\n                      key={raw}\n                      className=\"flex items-center gap-4 px-6 py-3\"\n                      data-testid={`source-row-${raw}`}\n                    >\n                      <span\n                        className=\"text-sm font-medium shrink-0 truncate\"\n                        style={{ color: \"var(--stone-900)\", width: \"200px\" }}\n                        title={raw}\n                      >\n                        {raw}\n                      </span>\n                      <svg\n                        className=\"w-4 h-4 shrink-0\"\n                        style={{ color: \"var(--stone-400)\" }}\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        viewBox=\"0 0 24 24\"\n                      >\n                        <path\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                          strokeWidth={2}\n                          d=\"M9 5l7 7-7 7\"\n                        />\n                      </svg>\n                      <select\n                        value={enrichmentMapping.source[raw] || \"other\"}\n                        onChange={(e) => updateSourceGroup(raw, e.target.value)}\n                        className=\"flex-1 px-3 py-1.5 text-sm\"\n                        style={selectStyle}\n                        data-testid={`select-source-group-${raw}`}\n                      >\n                        {SOURCE_GROUP_OPTIONS.map(({ value, label }) => (\n                          <option key={value} value={value}>\n                            {label}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            <div className=\"flex items-center gap-3 flex-wrap\">\n              <button\n                onClick={() => setStep(\"mapping\")}\n                className=\"inline-flex items-center px-5 py-2.5 text-[13px] font-semibold transition-colors\"\n                style={{\n                  background: \"#fff\",\n                  color: \"var(--stone-700)\",\n                  border: \"1px solid var(--stone-200)\",\n                  borderRadius: \"var(--radius-sm, 6px)\",\n                }}\n                data-testid=\"button-back-mapping\"\n              >\n                Back\n              </button>\n              <button\n                onClick={() => {\n                  setEnrichmentMapping({ industry: {}, source: {} });\n                  if (importMode === \"replace\") setShowReplaceConfirm(true);\n                  else doImport();\n                }}\n                className=\"inline-flex items-center px-5 py-2.5 text-[13px] font-semibold transition-colors\"\n                style={{\n                  background: \"#fff\",\n                  color: \"var(--stone-500)\",\n                  border: \"1px solid var(--stone-200)\",\n                  borderRadius: \"var(--radius-sm, 6px)\",\n                }}\n                data-testid=\"button-skip-enrichment\"\n              >\n                Skip grouping\n              </button>\n              <button\n                onClick={handleImportClick}\n                className=\"inline-flex items-center px-5 py-2.5 text-[13px] font-semibold text-white transition-colors\"\n                style={{\n                  background: importMode === \"replace\" ? \"var(--error)\" : \"var(--teal-600)\",\n                  borderRadius: \"var(--radius-sm, 6px)\",\n                }}\n                data-testid=\"button-import\"\n              >\n                {importMode === \"replace\" ? \"Replace & Import\" : \"Import\"}{\" \"}\n                {uploadResult?.totalRows} Rows\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Replace Confirmation Modal */}\n        {showReplaceConfirm && (\n          <div\n            className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\"\n            data-testid=\"modal-replace-confirm\"\n          >\n            <div\n              className=\"bg-white p-6 shadow-xl max-w-md mx-4\"\n              style={{\n                border: \"1px solid var(--stone-200)\",\n                borderRadius: \"var(--radius-lg, 14px)\",\n              }}\n            >\n              <div className=\"flex items-center gap-3 mb-4\">\n                <div\n                  className=\"inline-flex items-center justify-center w-10 h-10 rounded-full\"\n                  style={{ background: \"var(--error-bg)\" }}\n                >\n                  <svg\n                    className=\"w-5 h-5\"\n                    style={{ color: \"var(--error)\" }}\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z\"\n                    />\n                  </svg>\n                </div>\n                <h3 className=\"text-lg font-bold\" style={{ color: \"var(--stone-900)\" }}>\n                  Replace Existing Data?\n                </h3>\n              </div>\n              <p className=\"text-sm mb-6\" style={{ color: \"var(--stone-500)\" }}>\n                This will remove all existing opportunities and replace them with the data from\n                this file. This action cannot be undone.\n              </p>\n              <div className=\"flex items-center justify-end gap-3\">\n                <button\n                  onClick={() => setShowReplaceConfirm(false)}\n                  className=\"inline-flex items-center px-4 py-2 text-sm font-semibold\"\n                  style={{\n                    background: \"#fff\",\n                    color: \"var(--stone-700)\",\n                    border: \"1px solid var(--stone-200)\",\n                    borderRadius: \"var(--radius-sm, 6px)\",\n                  }}\n                  data-testid=\"button-cancel-replace\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={doImport}\n                  className=\"inline-flex items-center px-4 py-2 text-sm font-semibold text-white\"\n                  style={{\n                    background: \"var(--error)\",\n                    borderRadius: \"var(--radius-sm, 6px)\",\n                  }}\n                  data-testid=\"button-confirm-replace\"\n                >\n                  Yes, Replace All Data\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Importing */}\n        {step === \"importing\" && (\n          <div\n            className=\"bg-white p-6 text-center\"\n            style={{\n              border: \"1px solid var(--stone-200)\",\n              borderRadius: \"var(--radius-lg, 14px)\",\n            }}\n            data-testid=\"section-importing\"\n          >\n            <div\n              className=\"inline-flex items-center justify-center w-10 h-10 rounded-full mb-4\"\n              style={{ background: \"var(--teal-50)\" }}\n            >\n              <svg\n                className=\"w-5 h-5 animate-spin\"\n                style={{ color: \"var(--teal-600)\" }}\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n              >\n                <circle\n                  className=\"opacity-25\"\n                  cx=\"12\"\n                  cy=\"12\"\n                  r=\"10\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"4\"\n                />\n                <path\n                  className=\"opacity-75\"\n                  fill=\"currentColor\"\n                  d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z\"\n                />\n              </svg>\n            </div>\n            <p className=\"text-sm font-semibold\" style={{ color: \"var(--stone-900)\" }}>\n              Importing opportunities...\n            </p>\n            <p className=\"text-xs mt-1\" style={{ color: \"var(--stone-500)\" }}>\n              This may take a moment.\n            </p>\n          </div>\n        )}\n\n        {/* Results */}\n        {step === \"results\" && importResult && (\n          <div className=\"space-y-6\">\n            <div\n              className=\"bg-white\"\n              style={{\n                border: \"1px solid var(--stone-200)\",\n                borderRadius: \"var(--radius-lg, 14px)\",\n                overflow: \"hidden\",\n              }}\n              data-testid=\"section-results\"\n            >\n              <div className=\"p-6\">\n                <div className=\"flex items-center gap-2.5 mb-5\">\n                  <svg\n                    width=\"20\"\n                    height=\"20\"\n                    viewBox=\"0 0 24 24\"\n                    fill=\"none\"\n                    stroke=\"var(--success)\"\n                    strokeWidth=\"2\"\n                  >\n                    <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\" />\n                    <polyline points=\"22 4 12 14.01 9 11.01\" />\n                  </svg>\n                  <h2 className=\"text-[15px] font-bold\" style={{ color: \"var(--stone-900)\" }}>\n                    Import Complete\n                  </h2>\n                </div>\n                <div className=\"grid gap-4 sm:grid-cols-3\">\n                  <div\n                    className=\"bg-white p-5\"\n                    style={{\n                      border: \"1px solid var(--stone-200)\",\n                      borderRadius: \"var(--radius-md, 10px)\",\n                    }}\n                  >\n                    <p\n                      className=\"text-xs font-semibold uppercase mb-1\"\n                      style={{ color: \"var(--stone-500)\", letterSpacing: \"0.4px\" }}\n                    >\n                      Total Rows\n                    </p>\n                    <p\n                      className=\"text-[28px] font-bold\"\n                      style={{ color: \"var(--stone-900)\", letterSpacing: \"-0.5px\" }}\n                      data-testid=\"text-total-rows\"\n                    >\n                      {importResult.totalRows}\n                    </p>\n                  </div>\n                  <div\n                    className=\"bg-white p-5\"\n                    style={{\n                      border: \"1px solid var(--stone-200)\",\n                      borderLeft: \"3px solid var(--success)\",\n                      borderRadius: \"var(--radius-md, 10px)\",\n                    }}\n                  >\n                    <p\n                      className=\"text-xs font-semibold uppercase mb-1\"\n                      style={{ color: \"var(--stone-500)\", letterSpacing: \"0.4px\" }}\n                    >\n                      Inserted\n                    </p>\n                    <p\n                      className=\"text-[28px] font-bold\"\n                      style={{ color: \"var(--success)\", letterSpacing: \"-0.5px\" }}\n                      data-testid=\"text-inserted-count\"\n                    >\n                      {importResult.insertedCount}\n                    </p>\n                  </div>\n                  <div\n                    className=\"bg-white p-5\"\n                    style={{\n                      border: \"1px solid var(--stone-200)\",\n                      borderLeft:\n                        importResult.errorCount > 0 ? \"3px solid var(--error)\" : undefined,\n                      borderRadius: \"var(--radius-md, 10px)\",\n                    }}\n                  >\n                    <p\n                      className=\"text-xs font-semibold uppercase mb-1\"\n                      style={{ color: \"var(--stone-500)\", letterSpacing: \"0.4px\" }}\n                    >\n                      Errors\n                    </p>\n                    <p\n                      className=\"text-[28px] font-bold\"\n                      style={{\n                        color:\n                          importResult.errorCount > 0 ? \"var(--error)\" : \"var(--stone-900)\",\n                        letterSpacing: \"-0.5px\",\n                      }}\n                      data-testid=\"text-error-count\"\n                    >\n                      {importResult.errorCount}\n                    </p>\n                  </div>\n                </div>\n\n                {importResult.enrichmentMapping &&\n                  (Object.keys(importResult.enrichmentMapping.industry).length > 0 ||\n                    Object.keys(importResult.enrichmentMapping.source).length > 0) && (\n                    <div\n                      className=\"mt-5 px-4 py-3 rounded-md\"\n                      style={{\n                        background: \"var(--teal-50)\",\n                        border: \"1px solid var(--teal-200)\",\n                      }}\n                    >\n                      <p\n                        className=\"text-xs font-semibold\"\n                        style={{ color: \"var(--teal-800)\" }}\n                      >\n                        Enrichment applied\n                      </p>\n                      <p className=\"text-xs mt-0.5\" style={{ color: \"var(--teal-700)\" }}>\n                        {Object.keys(importResult.enrichmentMapping.industry).length > 0 &&\n                          `${Object.keys(importResult.enrichmentMapping.industry).length} industry values mapped to clusters. `}\n                        {Object.keys(importResult.enrichmentMapping.source).length > 0 &&\n                          `${Object.keys(importResult.enrichmentMapping.source).length} source values mapped to inbound/outbound.`}\n                        {\" \"}These appear as &ldquo;Industry Cluster&rdquo; and &ldquo;Source Group&rdquo; in your analytics.\n                      </p>\n                    </div>\n                  )}\n              </div>\n            </div>\n\n            {importResult.errors.length > 0 && (\n              <div\n                className=\"bg-white\"\n                style={{\n                  border: \"1px solid var(--stone-200)\",\n                  borderRadius: \"var(--radius-lg, 14px)\",\n                  overflow: \"hidden\",\n                }}\n                data-testid=\"section-error-details\"\n              >\n                <div className=\"p-6\">\n                  <h2\n                    className=\"text-sm font-semibold mb-4 flex items-center gap-2\"\n                    style={{ color: \"var(--stone-800)\" }}\n                  >\n                    Error Details\n                    <span\n                      className=\"text-[11px] font-semibold px-2 py-0.5 rounded-full\"\n                      style={{ background: \"var(--error-bg)\", color: \"var(--error)\" }}\n                    >\n                      {importResult.errorCount} rows\n                    </span>\n                  </h2>\n                  <div className=\"overflow-x-auto\">\n                    <table className=\"min-w-full text-[13px]\">\n                      <thead>\n                        <tr style={{ borderBottom: \"1px solid var(--stone-200)\" }}>\n                          <th\n                            className=\"px-4 py-2.5 text-left text-[11px] font-semibold uppercase\"\n                            style={{\n                              color: \"var(--stone-500)\",\n                              background: \"var(--stone-50)\",\n                              letterSpacing: \"0.5px\",\n                              width: \"60px\",\n                            }}\n                          >\n                            Row\n                          </th>\n                          <th\n                            className=\"px-4 py-2.5 text-left text-[11px] font-semibold uppercase\"\n                            style={{\n                              color: \"var(--stone-500)\",\n                              background: \"var(--stone-50)\",\n                              letterSpacing: \"0.5px\",\n                            }}\n                          >\n                            Error\n                          </th>\n                          <th\n                            className=\"px-4 py-2.5 text-left text-[11px] font-semibold uppercase\"\n                            style={{\n                              color: \"var(--stone-500)\",\n                              background: \"var(--stone-50)\",\n                              letterSpacing: \"0.5px\",\n                              width: \"240px\",\n                            }}\n                          >\n                            Data\n                          </th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {importResult.errors.map((err, i) => (\n                          <tr key={i} style={{ borderBottom: \"1px solid var(--stone-100)\" }}>\n                            <td\n                              className=\"px-4 py-3\"\n                              data-testid={`text-error-row-${i}`}\n                            >\n                              <span\n                                className=\"font-mono text-xs px-2 py-0.5 rounded\"\n                                style={{\n                                  background: \"var(--stone-100)\",\n                                  color: \"var(--stone-400)\",\n                                }}\n                              >\n                                {err.row_number}\n                              </span>\n                            </td>\n                            <td\n                              className=\"px-4 py-3\"\n                              data-testid={`text-error-msg-${i}`}\n                            >\n                              <span\n                                className=\"text-xs px-2 py-1 rounded inline-block\"\n                                style={{\n                                  background: \"var(--error-bg)\",\n                                  color: \"var(--error)\",\n                                }}\n                              >\n                                {err.error_message}\n                              </span>\n                            </td>\n                            <td className=\"px-4 py-3\">\n                              <span\n                                className=\"font-mono text-[11px] max-w-[280px] truncate block\"\n                                style={{ color: \"var(--stone-500)\" }}\n                              >\n                                {JSON.stringify(err.raw_row_json)}\n                              </span>\n                            </td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div className=\"flex items-center gap-3 flex-wrap\">\n              <button\n                onClick={handleReset}\n                className=\"inline-flex items-center px-5 py-2.5 text-[13px] font-semibold\"\n                style={{\n                  background: \"#fff\",\n                  color: \"var(--stone-700)\",\n                  border: \"1px solid var(--stone-200)\",\n                  borderRadius: \"var(--radius-sm, 6px)\",\n                }}\n                data-testid=\"button-import-another\"\n              >\n                Import Another File\n              </button>\n              <Link\n                href={`/app/dashboard${importResult.jobId ? `?dataset=${importResult.jobId}` : \"\"}`}\n                className=\"inline-flex items-center gap-2 px-5 py-2.5 text-[13px] font-semibold text-white\"\n                style={{\n                  background: \"var(--teal-600)\",\n                  borderRadius: \"var(--radius-sm, 6px)\",\n                }}\n                data-testid=\"link-view-analytics\"\n              >\n                View Analytics\n                <svg\n                  width=\"16\"\n                  height=\"16\"\n                  viewBox=\"0 0 24 24\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"2\"\n                >\n                  <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n                  <polyline points=\"12 5 19 12 12 19\" />\n                </svg>\n              </Link>\n            </div>\n          </div>\n        )}\n\n        {/* Import History */}\n        <div className=\"mt-12\" data-testid=\"section-import-history\">\n          <h2 className=\"text-lg font-bold mb-4\" style={{ color: \"var(--stone-900)\" }}>\n            Import History\n          </h2>\n          {historyLoading ? (\n            <div className=\"flex items-center justify-center py-8\">\n              <svg\n                className=\"w-5 h-5 animate-spin\"\n                style={{ color: \"var(--teal-600)\" }}\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n              >\n                <circle\n                  className=\"opacity-25\"\n                  cx=\"12\"\n                  cy=\"12\"\n                  r=\"10\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"4\"\n                />\n                <path\n                  className=\"opacity-75\"\n                  fill=\"currentColor\"\n                  d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z\"\n                />\n              </svg>\n            </div>\n          ) : importHistory.length === 0 ? (\n            <div\n              className=\"bg-white p-6 text-center\"\n              style={{\n                border: \"1px solid var(--stone-200)\",\n                borderRadius: \"var(--radius-lg, 14px)\",\n              }}\n            >\n              <p className=\"text-sm\" style={{ color: \"var(--stone-500)\" }}>\n                No imports yet. Upload a CSV file above to get started.\n              </p>\n            </div>\n          ) : (\n            <div\n              className=\"bg-white overflow-hidden\"\n              style={{\n                border: \"1px solid var(--stone-200)\",\n                borderRadius: \"var(--radius-lg, 14px)\",\n              }}\n            >\n              <div className=\"overflow-x-auto\">\n                <table className=\"min-w-full text-[13px]\">\n                  <thead>\n                    <tr style={{ borderBottom: \"1px solid var(--stone-200)\" }}>\n                      {[\n                        \"File\",\n                        \"Mode\",\n                        \"Status\",\n                        \"Rows\",\n                        \"Inserted\",\n                        \"Errors\",\n                        \"Date\",\n                        \"Actions\",\n                      ].map((h) => (\n                        <th\n                          key={h}\n                          className={`px-4 py-3 text-[11px] font-semibold uppercase ${\n                            [\"Rows\", \"Inserted\", \"Errors\"].includes(h)\n                              ? \"text-right\"\n                              : \"text-left\"\n                          }`}\n                          style={{\n                            color: \"var(--stone-500)\",\n                            background: \"var(--stone-50)\",\n                            letterSpacing: \"0.5px\",\n                          }}\n                        >\n                          {h}\n                        </th>\n                      ))}\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {importHistory.map((job) => (\n                      <tr\n                        key={job.id}\n                        style={{\n                          borderBottom: \"1px solid var(--stone-100)\",\n                          opacity: !job.is_active ? 0.5 : 1,\n                        }}\n                        data-testid={`import-job-${job.id}`}\n                      >\n                        <td\n                          className=\"px-4 py-3 font-medium whitespace-nowrap max-w-[200px] truncate\"\n                          style={{ color: \"var(--stone-900)\" }}\n                        >\n                          {job.filename}\n                        </td>\n                        <td className=\"px-4 py-3\">\n                          <span\n                            className=\"inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-semibold\"\n                            style={{\n                              background:\n                                job.import_mode === \"replace\"\n                                  ? \"var(--warning-bg)\"\n                                  : \"var(--info-bg)\",\n                              color:\n                                job.import_mode === \"replace\"\n                                  ? \"var(--warning)\"\n                                  : \"var(--teal-700)\",\n                            }}\n                          >\n                            {job.import_mode}\n                          </span>\n                        </td>\n                        <td className=\"px-4 py-3\">\n                          <StatusBadge status={job.status} isActive={job.is_active} />\n                        </td>\n                        <td\n                          className=\"px-4 py-3 text-right\"\n                          style={{ color: \"var(--stone-700)\" }}\n                        >\n                          {job.row_count}\n                        </td>\n                        <td\n                          className=\"px-4 py-3 text-right\"\n                          style={{ color: \"var(--success)\" }}\n                        >\n                          {job.inserted_count}\n                        </td>\n                        <td\n                          className=\"px-4 py-3 text-right\"\n                          style={{\n                            color:\n                              job.error_count > 0 ? \"var(--error)\" : \"var(--stone-700)\",\n                          }}\n                        >\n                          {job.error_count}\n                        </td>\n                        <td\n                          className=\"px-4 py-3 whitespace-nowrap\"\n                          style={{ color: \"var(--stone-500)\" }}\n                        >\n                          {new Date(job.created_at).toLocaleDateString()}{\" \"}\n                          {new Date(job.created_at).toLocaleTimeString([], {\n                            hour: \"2-digit\",\n                            minute: \"2-digit\",\n                          })}\n                        </td>\n                        <td className=\"px-4 py-3\">\n                          {job.status === \"completed\" && job.is_active && (\n                            <Link\n                              href={`/app/dashboard?dataset=${job.id}`}\n                              className=\"text-xs font-medium\"\n                              style={{ color: \"var(--teal-600)\" }}\n                              data-testid={`link-analytics-${job.id}`}\n                            >\n                              View Analytics\n                            </Link>\n                          )}\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          )}\n        </div>\n      </main>\n    </div>\n  );\n}\n\nfunction StatusBadge({ status, isActive }: { status: string; isActive: boolean }) {\n  if (!isActive) {\n    return (\n      <span\n        className=\"inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-semibold\"\n        style={{ background: \"var(--stone-100)\", color: \"var(--stone-500)\" }}\n      >\n        inactive\n      </span>\n    );\n  }\n  const styles: Record<string, { bg: string; color: string }> = {\n    completed: { bg: \"var(--success-bg)\", color: \"var(--success)\" },\n    running: { bg: \"var(--info-bg)\", color: \"var(--teal-700)\" },\n    pending: { bg: \"var(--warning-bg)\", color: \"var(--warning)\" },\n    failed: { bg: \"var(--error-bg)\", color: \"var(--error)\" },\n  };\n  const s = styles[status] || styles.pending;\n  return (\n    <span\n      className=\"inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-semibold\"\n      style={{ background: s.bg, color: s.color }}\n    >\n      {status}\n    </span>\n  );\n}\n\nfunction StepIndicator({\n  label,\n  active,\n  done,\n  num,\n}: {\n  label: string;\n  active: boolean;\n  done: boolean;\n  num: number;\n}) {\n  return (\n    <div className=\"flex items-center gap-2.5\">\n      <span\n        className=\"inline-flex items-center justify-center w-7 h-7 rounded-full text-xs font-semibold\"\n        style={{\n          background: done && !active ? \"var(--teal-600)\" : active ? \"var(--teal-50)\" : \"#fff\",\n          color: done && !active ? \"#fff\" : active ? \"var(--teal-600)\" : \"var(--stone-400)\",\n          border:\n            done && !active\n              ? \"2px solid var(--teal-600)\"\n              : active\n              ? \"2px solid var(--teal-600)\"\n              : \"2px solid var(--stone-300)\",\n        }}\n      >\n        {done && !active ? (\n          <svg\n            width=\"14\"\n            height=\"14\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth={3}\n          >\n            <polyline points=\"20 6 9 17 4 12\" />\n          </svg>\n        ) : (\n          num\n        )}\n      </span>\n      <span\n        className=\"text-[13px] font-medium\"\n        style={{ color: active || done ? \"var(--stone-700)\" : \"var(--stone-400)\" }}\n      >\n        {label}\n      </span>\n    </div>\n  );\n}\n\nfunction StepDivider({ done }: { done?: boolean }) {\n  return (\n    <div\n      style={{\n        width: \"40px\",\n        height: \"2px\",\n        background: done ? \"var(--teal-400)\" : \"var(--stone-200)\",\n        margin: \"0 0 0 10px\",\n        marginRight: \"10px\",\n      }}\n    />\n  );\n}"],"names":[],"mappings":"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"}}]
}