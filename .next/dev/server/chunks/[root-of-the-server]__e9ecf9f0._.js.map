{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from \"@supabase/ssr\";\nimport { cookies } from \"next/headers\";\n\nexport async function createClient() {\n  const cookieStore = await cookies();\n\n  return createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return cookieStore.getAll();\n        },\n        setAll(cookiesToSet) {\n          try {\n            cookiesToSet.forEach(({ name, value, options }) =>\n              cookieStore.set(name, value, options)\n            );\n          } catch {\n            // The `setAll` method was called from a Server Component.\n            // This can be ignored if you have middleware refreshing user sessions.\n          }\n        },\n      },\n    }\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,4IAAO;IAEjC,OAAO,IAAA,iMAAkB,sUAGvB;QACE,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC5C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAEjC,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,uEAAuE;gBACzE;YACF;QACF;IACF;AAEJ"}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/get-user-org.ts"],"sourcesContent":["import { createClient } from \"@/lib/supabase/server\";\nimport { createClient as createSupabaseClient } from \"@supabase/supabase-js\";\n\nexport type UserOrg = {\n  user: { id: string; email: string };\n  membership: { org_id: string; role: string };\n  org: { id: string; name: string };\n};\n\nexport type UserOrgError = {\n  error: string;\n  status: number;\n};\n\nfunction createAdminClient() {\n  return createSupabaseClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.SUPABASE_SERVICE_ROLE_KEY!\n  );\n}\n\nexport async function getUserOrg(): Promise<UserOrg | UserOrgError> {\n  const supabase = await createClient();\n\n  const {\n    data: { user },\n  } = await supabase.auth.getUser();\n\n  if (!user) {\n    return { error: \"Unauthorized\", status: 401 };\n  }\n\n  const admin = createAdminClient();\n\n  const { data: membership, error: memError } = await admin\n    .from(\"memberships\")\n    .select(\"org_id, role\")\n    .eq(\"user_id\", user.id)\n    .limit(1)\n    .maybeSingle();\n\n  if (memError || !membership) {\n    return {\n      error: \"No membership found. You may need to create an organization or contact support.\",\n      status: 403,\n    };\n  }\n\n  const { data: org, error: orgError } = await admin\n    .from(\"organizations\")\n    .select(\"id, name\")\n    .eq(\"id\", membership.org_id)\n    .limit(1)\n    .maybeSingle();\n\n  if (orgError || !org) {\n    return {\n      error: \"Organization record not found. Please contact support.\",\n      status: 500,\n    };\n  }\n\n  return {\n    user: { id: user.id, email: user.email ?? \"\" },\n    membership: { org_id: membership.org_id, role: membership.role },\n    org: { id: org.id, name: org.name },\n  };\n}\n\nexport function isUserOrgError(result: UserOrg | UserOrgError): result is UserOrgError {\n  return \"error\" in result;\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAaA,SAAS;IACP,OAAO,IAAA,gMAAoB,gFAEzB,QAAQ,GAAG,CAAC,yBAAyB;AAEzC;AAEO,eAAe;IACpB,MAAM,WAAW,MAAM,IAAA,2IAAY;IAEnC,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE/B,IAAI,CAAC,MAAM;QACT,OAAO;YAAE,OAAO;YAAgB,QAAQ;QAAI;IAC9C;IAEA,MAAM,QAAQ;IAEd,MAAM,EAAE,MAAM,UAAU,EAAE,OAAO,QAAQ,EAAE,GAAG,MAAM,MACjD,IAAI,CAAC,eACL,MAAM,CAAC,gBACP,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,KAAK,CAAC,GACN,WAAW;IAEd,IAAI,YAAY,CAAC,YAAY;QAC3B,OAAO;YACL,OAAO;YACP,QAAQ;QACV;IACF;IAEA,MAAM,EAAE,MAAM,GAAG,EAAE,OAAO,QAAQ,EAAE,GAAG,MAAM,MAC1C,IAAI,CAAC,iBACL,MAAM,CAAC,YACP,EAAE,CAAC,MAAM,WAAW,MAAM,EAC1B,KAAK,CAAC,GACN,WAAW;IAEd,IAAI,YAAY,CAAC,KAAK;QACpB,OAAO;YACL,OAAO;YACP,QAAQ;QACV;IACF;IAEA,OAAO;QACL,MAAM;YAAE,IAAI,KAAK,EAAE;YAAE,OAAO,KAAK,KAAK,IAAI;QAAG;QAC7C,YAAY;YAAE,QAAQ,WAAW,MAAM;YAAE,MAAM,WAAW,IAAI;QAAC;QAC/D,KAAK;YAAE,IAAI,IAAI,EAAE;YAAE,MAAM,IAAI,IAAI;QAAC;IACpC;AACF;AAEO,SAAS,eAAe,MAA8B;IAC3D,OAAO,WAAW;AACpB"}},
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/api/admin/status/route.ts"],"sourcesContent":["import { getUserOrg, isUserOrgError } from \"@/lib/get-user-org\";\nimport { createClient } from \"@/lib/supabase/server\";\nimport { createClient as createSupabaseClient } from \"@supabase/supabase-js\";\nimport { NextResponse } from \"next/server\";\n\ntype CheckResult = {\n  id: string;\n  label: string;\n  category: string;\n  passed: boolean;\n  message: string;\n  fixSql?: string;\n};\n\nconst REQUIRED_SCHEMA: Record<string, string[]> = {\n  organizations: [\"id\", \"name\", \"created_at\"],\n  profiles: [\"id\", \"email\", \"created_at\"],\n  memberships: [\"id\", \"org_id\", \"user_id\", \"role\", \"created_at\"],\n  opportunities: [\n    \"id\", \"org_id\", \"import_job_id\", \"name\", \"role\", \"industry\", \"source\",\n    \"amount\", \"outcome\", \"created_at\", \"closed_date\", \"pipeline_accepted_date\",\n    \"segment\", \"country\",\n  ],\n  import_jobs: [\n    \"id\", \"org_id\", \"user_id\", \"filename\", \"inserted_count\", \"error_count\",\n    \"skipped_count\", \"row_count\", \"status\", \"is_active\", \"import_mode\",\n    \"mapping_config\", \"started_at\", \"completed_at\", \"created_at\",\n  ],\n  import_errors: [\"id\", \"job_id\", \"row_number\", \"error_message\", \"raw_row_json\", \"created_at\"],\n};\n\nfunction createAdminClient() {\n  return createSupabaseClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.SUPABASE_SERVICE_ROLE_KEY!\n  );\n}\n\nexport async function GET() {\n  const result = await getUserOrg();\n\n  if (isUserOrgError(result)) {\n    return NextResponse.json({ error: result.error }, { status: result.status });\n  }\n\n  if (result.membership.role !== \"admin\") {\n    return NextResponse.json({ error: \"Admin access required\" }, { status: 403 });\n  }\n\n  const admin = createAdminClient();\n  const supabase = await createClient();\n  const orgId = result.membership.org_id;\n  const userId = result.user.id;\n  const checks: CheckResult[] = [];\n\n  for (const [table, columns] of Object.entries(REQUIRED_SCHEMA)) {\n    const selectCols = columns.join(\", \");\n    const { error: selectError } = await admin\n      .from(table)\n      .select(selectCols)\n      .limit(0);\n\n    if (!selectError) {\n      checks.push({\n        id: `table-${table}`,\n        label: `Table \"${table}\" with all columns`,\n        category: \"Schema\",\n        passed: true,\n        message: `Table exists with all ${columns.length} required columns`,\n      });\n    } else {\n      const errMsg = selectError.message || \"\";\n\n      const relationMissing = errMsg.includes(\"relation\") && errMsg.includes(\"does not exist\");\n      if (relationMissing) {\n        checks.push({\n          id: `table-${table}`,\n          label: `Table \"${table}\" exists`,\n          category: \"Schema\",\n          passed: false,\n          message: `Table \"${table}\" does not exist`,\n          fixSql: `-- Run the appropriate migration SQL to create the \"${table}\" table.\\n-- See supabase/migrations/ directory for the correct CREATE TABLE statement.`,\n        });\n        continue;\n      }\n\n      const colMatch = errMsg.match(/column (\\w+)\\.(\\w+) does not exist/) ||\n                        errMsg.match(/Could not find the .* column of '(\\w+)' in the schema cache/) ||\n                        errMsg.match(/column \"?(\\w+)\"? does not exist/);\n\n      if (colMatch) {\n        checks.push({\n          id: `table-${table}`,\n          label: `Table \"${table}\" exists`,\n          category: \"Schema\",\n          passed: true,\n          message: \"Table exists\",\n        });\n\n        for (const col of columns) {\n          const { error: singleColErr } = await admin\n            .from(table)\n            .select(col)\n            .limit(0);\n\n          const colExists = !singleColErr;\n          checks.push({\n            id: `col-${table}-${col}`,\n            label: `Column \"${table}.${col}\"`,\n            category: \"Schema\",\n            passed: colExists,\n            message: colExists ? \"Column found\" : `Column \"${col}\" missing from \"${table}\"`,\n            fixSql: colExists\n              ? undefined\n              : `ALTER TABLE public.${table} ADD COLUMN \"${col}\" text;\\n-- Adjust the data type as needed. Check migration files for the correct type.`,\n          });\n        }\n      } else {\n        checks.push({\n          id: `table-${table}`,\n          label: `Table \"${table}\" schema check`,\n          category: \"Schema\",\n          passed: false,\n          message: `Error checking \"${table}\": ${errMsg}`,\n          fixSql: `-- Investigate the error:\\n-- ${errMsg}\\n-- Check supabase/migrations/ for the expected schema.`,\n        });\n      }\n    }\n  }\n\n  try {\n    const { data: memData, error: memError } = await supabase\n      .from(\"memberships\")\n      .select(\"id, role\")\n      .eq(\"user_id\", userId)\n      .limit(1)\n      .maybeSingle();\n\n    if (memError) {\n      const isRecursion = memError.message?.includes(\"infinite recursion\") || memError.code === \"42P17\";\n      checks.push({\n        id: \"rls-memberships-read\",\n        label: \"Read own memberships (via RLS)\",\n        category: \"Access\",\n        passed: false,\n        message: isRecursion\n          ? `RLS infinite recursion detected: ${memError.message}`\n          : `Failed to read memberships: ${memError.message}`,\n        fixSql: isRecursion\n          ? `-- The memberships RLS policy references itself, causing infinite recursion.\\n-- Fix by simplifying the SELECT policy to use auth.uid() directly:\\n\\nDROP POLICY IF EXISTS \"Users can view own memberships\" ON public.memberships;\\nCREATE POLICY \"Users can view own memberships\"\\n  ON public.memberships FOR SELECT\\n  USING (user_id = auth.uid());`\n          : `-- Check your RLS policies on memberships:\\nSELECT schemaname, tablename, policyname, permissive, roles, cmd, qual\\nFROM pg_policies WHERE tablename = 'memberships';`,\n      });\n    } else {\n      checks.push({\n        id: \"rls-memberships-read\",\n        label: \"Read own memberships (via RLS)\",\n        category: \"Access\",\n        passed: true,\n        message: memData ? `OK (role: ${memData.role})` : \"Query succeeded but no row found for current user\",\n      });\n    }\n  } catch (e: any) {\n    checks.push({\n      id: \"rls-memberships-read\",\n      label: \"Read own memberships (via RLS)\",\n      category: \"Access\",\n      passed: false,\n      message: `Unexpected error: ${e.message}`,\n    });\n  }\n\n  try {\n    const { data: oppData, error: oppError } = await admin\n      .from(\"opportunities\")\n      .select(\"id\")\n      .eq(\"org_id\", orgId)\n      .limit(1);\n\n    checks.push({\n      id: \"access-opportunities-read\",\n      label: \"Read opportunities for org\",\n      category: \"Access\",\n      passed: !oppError,\n      message: oppError\n        ? `Failed: ${oppError.message}`\n        : `OK (${oppData?.length ?? 0} returned in sample)`,\n      fixSql: oppError\n        ? `-- Check RLS policies on opportunities:\\nSELECT schemaname, tablename, policyname, permissive, roles, cmd, qual\\nFROM pg_policies WHERE tablename = 'opportunities';`\n        : undefined,\n    });\n  } catch (e: any) {\n    checks.push({\n      id: \"access-opportunities-read\",\n      label: \"Read opportunities for org\",\n      category: \"Access\",\n      passed: false,\n      message: `Unexpected error: ${e.message}`,\n    });\n  }\n\n  try {\n    const testJobData = {\n      org_id: orgId,\n      user_id: userId,\n      filename: \"__status_check_test__\",\n      inserted_count: 0,\n      error_count: 0,\n      skipped_count: 0,\n      row_count: 0,\n      status: \"pending\",\n      is_active: false,\n      import_mode: \"append\",\n    };\n\n    const { data: insertedJob, error: insertError } = await admin\n      .from(\"import_jobs\")\n      .insert(testJobData)\n      .select(\"id\")\n      .single();\n\n    if (insertError) {\n      checks.push({\n        id: \"access-import-jobs-create\",\n        label: \"Create import_jobs record\",\n        category: \"Access\",\n        passed: false,\n        message: `Failed: ${insertError.message}`,\n        fixSql: `-- Check the import_jobs table structure:\\nSELECT column_name, data_type, is_nullable\\nFROM information_schema.columns\\nWHERE table_name = 'import_jobs' AND table_schema = 'public'\\nORDER BY ordinal_position;`,\n      });\n    } else {\n      await admin.from(\"import_jobs\").delete().eq(\"id\", insertedJob.id);\n      checks.push({\n        id: \"access-import-jobs-create\",\n        label: \"Create import_jobs record\",\n        category: \"Access\",\n        passed: true,\n        message: \"Create and cleanup test record OK\",\n      });\n    }\n  } catch (e: any) {\n    checks.push({\n      id: \"access-import-jobs-create\",\n      label: \"Create import_jobs record\",\n      category: \"Access\",\n      passed: false,\n      message: `Unexpected error: ${e.message}`,\n    });\n  }\n\n  try {\n    const { error: rlsError } = await supabase\n      .from(\"memberships\")\n      .select(\"id\")\n      .limit(1);\n\n    const isRecursion = rlsError?.message?.includes(\"infinite recursion\") || rlsError?.code === \"42P17\";\n\n    checks.push({\n      id: \"rls-recursion-check\",\n      label: \"Memberships RLS recursion test\",\n      category: \"RLS\",\n      passed: !isRecursion,\n      message: isRecursion\n        ? `Infinite recursion detected: ${rlsError?.message}`\n        : rlsError\n          ? `Non-recursion error: ${rlsError.message}`\n          : \"No recursion detected â€” RLS policies are clean\",\n      fixSql: isRecursion\n        ? `-- The memberships RLS policy references itself, causing infinite recursion.\\n-- Fix by using auth.uid() directly:\\n\\nDROP POLICY IF EXISTS \"Users can view own memberships\" ON public.memberships;\\nCREATE POLICY \"Users can view own memberships\"\\n  ON public.memberships FOR SELECT\\n  USING (user_id = auth.uid());\\n\\n-- If other tables (e.g. organizations) reference memberships in their policies,\\n-- use a SECURITY DEFINER function to avoid the recursion:\\n\\nCREATE OR REPLACE FUNCTION public.get_user_org_id()\\nRETURNS uuid\\nLANGUAGE sql\\nSECURITY DEFINER\\nSTABLE\\nAS $$\\n  SELECT org_id FROM public.memberships\\n  WHERE user_id = auth.uid()\\n  LIMIT 1;\\n$$;`\n        : undefined,\n    });\n  } catch (e: any) {\n    checks.push({\n      id: \"rls-recursion-check\",\n      label: \"Memberships RLS recursion test\",\n      category: \"RLS\",\n      passed: false,\n      message: `Unexpected error: ${e.message}`,\n    });\n  }\n\n  const envChecks = [\n    { key: \"NEXT_PUBLIC_SUPABASE_URL\", label: \"Supabase URL configured\" },\n    { key: \"NEXT_PUBLIC_SUPABASE_ANON_KEY\", label: \"Supabase Anon Key configured\" },\n    { key: \"SUPABASE_SERVICE_ROLE_KEY\", label: \"Service Role Key configured\" },\n    { key: \"OPENAI_API_KEY\", label: \"OpenAI API Key configured\" },\n  ];\n\n  for (const env of envChecks) {\n    const value = process.env[env.key];\n    checks.push({\n      id: `env-${env.key}`,\n      label: env.label,\n      category: \"Environment\",\n      passed: !!value && value.length > 0,\n      message: value ? \"Set\" : `Environment variable ${env.key} is not set`,\n    });\n  }\n\n  const passedCount = checks.filter((c) => c.passed).length;\n  const failedCount = checks.filter((c) => !c.passed).length;\n\n  return NextResponse.json({\n    checks,\n    summary: {\n      total: checks.length,\n      passed: passedCount,\n      failed: failedCount,\n      healthy: failedCount === 0,\n    },\n    user: {\n      id: userId,\n      email: result.user.email,\n      role: result.membership.role,\n      orgId,\n      orgName: result.org.name,\n    },\n  });\n}\n"],"names":[],"mappings":"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"}}]
}