{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/app/import/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\nimport Link from \"next/link\";\n\ntype UploadResult = {\n  headers: string[];\n  preview: Record<string, string>[];\n  totalRows: number;\n  filename: string;\n};\n\ntype ImportResult = {\n  jobId: string;\n  insertedCount: number;\n  errorCount: number;\n  skippedCount: number;\n  totalRows: number;\n  errors: {\n    row_number: number;\n    error_message: string;\n    raw_row_json: Record<string, string>;\n  }[];\n};\n\ntype ImportJob = {\n  id: string;\n  filename: string;\n  status: string;\n  row_count: number;\n  inserted_count: number;\n  error_count: number;\n  skipped_count: number;\n  is_active: boolean;\n  import_mode: string;\n  created_at: string;\n  started_at: string | null;\n  completed_at: string | null;\n};\n\nconst TARGET_FIELDS = [\n  { key: \"name\", label: \"Name\", required: true },\n  { key: \"role\", label: \"Role\", required: true },\n  { key: \"industry\", label: \"Industry\", required: true },\n  { key: \"source\", label: \"Source\", required: true },\n  { key: \"amount\", label: \"Amount\", required: true },\n  { key: \"outcome\", label: \"Outcome\", required: true },\n  { key: \"created_at\", label: \"Created At\", required: false },\n  { key: \"closed_date\", label: \"Closed Date\", required: false },\n  { key: \"pipeline_accepted_date\", label: \"Pipeline Accepted Date\", required: false },\n  { key: \"segment\", label: \"Segment\", required: false },\n  { key: \"country\", label: \"Country\", required: false },\n];\n\ntype Step = \"upload\" | \"mapping\" | \"importing\" | \"results\";\n\nexport default function ImportPage() {\n  const [step, setStep] = useState<Step>(\"upload\");\n  const [file, setFile] = useState<File | null>(null);\n  const [uploadResult, setUploadResult] = useState<UploadResult | null>(null);\n  const [mapping, setMapping] = useState<Record<string, string>>({});\n  const [importResult, setImportResult] = useState<ImportResult | null>(null);\n  const [error, setError] = useState<string>(\"\");\n  const [uploading, setUploading] = useState(false);\n  const [importing, setImporting] = useState(false);\n  const [importMode, setImportMode] = useState<\"append\" | \"replace\">(\"append\");\n  const [showReplaceConfirm, setShowReplaceConfirm] = useState(false);\n  const [importHistory, setImportHistory] = useState<ImportJob[]>([]);\n  const [historyLoading, setHistoryLoading] = useState(true);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    fetchHistory();\n  }, []);\n\n  async function fetchHistory() {\n    setHistoryLoading(true);\n    try {\n      const res = await fetch(\"/api/import/jobs\");\n      if (res.ok) {\n        const data = await res.json();\n        setImportHistory(data.jobs || []);\n      }\n    } catch {}\n    setHistoryLoading(false);\n  }\n\n  async function handleUpload() {\n    if (!file) return;\n    setError(\"\");\n    setUploading(true);\n\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n\n      const res = await fetch(\"/api/import/upload\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      const data = await res.json();\n\n      if (!res.ok) {\n        setError(data.error || \"Upload failed\");\n        setUploading(false);\n        return;\n      }\n\n      setUploadResult(data);\n\n      const autoMapping: Record<string, string> = {};\n      for (const field of TARGET_FIELDS) {\n        const match = data.headers.find(\n          (h: string) => h.toLowerCase().replace(/[_\\s-]/g, \"\") === field.key.replace(/_/g, \"\")\n        );\n        if (match) {\n          autoMapping[field.key] = match;\n        }\n      }\n      setMapping(autoMapping);\n      setStep(\"mapping\");\n    } catch {\n      setError(\"Failed to upload file. Please try again.\");\n    } finally {\n      setUploading(false);\n    }\n  }\n\n  function handleMappingChange(targetField: string, csvHeader: string) {\n    setMapping((prev) => ({\n      ...prev,\n      [targetField]: csvHeader,\n    }));\n  }\n\n  function isMappingValid(): boolean {\n    return TARGET_FIELDS.filter((f) => f.required).every(\n      (f) => mapping[f.key] && mapping[f.key] !== \"\"\n    );\n  }\n\n  function handleImportClick() {\n    if (importMode === \"replace\") {\n      setShowReplaceConfirm(true);\n    } else {\n      doImport();\n    }\n  }\n\n  async function doImport() {\n    if (!file || !uploadResult) return;\n    setError(\"\");\n    setImporting(true);\n    setStep(\"importing\");\n    setShowReplaceConfirm(false);\n\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n      formData.append(\"mapping\", JSON.stringify(mapping));\n      formData.append(\"mode\", importMode);\n\n      const res = await fetch(\"/api/import/execute\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      const data = await res.json();\n\n      if (!res.ok) {\n        setError(data.error || \"Import failed\");\n        setStep(\"mapping\");\n        setImporting(false);\n        return;\n      }\n\n      setImportResult(data);\n      setStep(\"results\");\n      fetchHistory();\n    } catch {\n      setError(\"Import failed. Please try again.\");\n      setStep(\"mapping\");\n    } finally {\n      setImporting(false);\n    }\n  }\n\n  function handleReset() {\n    setStep(\"upload\");\n    setFile(null);\n    setUploadResult(null);\n    setMapping({});\n    setImportResult(null);\n    setError(\"\");\n    setImportMode(\"append\");\n    if (fileInputRef.current) {\n      fileInputRef.current.value = \"\";\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <header className=\"border-b border-border\">\n        <div className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between gap-4 flex-wrap\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"inline-flex items-center justify-center w-8 h-8 rounded-md bg-primary\">\n              <svg className=\"w-4 h-4 text-primary-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n              </svg>\n            </div>\n            <span className=\"text-sm font-semibold text-foreground\" data-testid=\"text-import-title\">\n              Import Opportunities\n            </span>\n          </div>\n          <div className=\"flex items-center gap-3 flex-wrap\">\n            <Link\n              href=\"/app/dashboard\"\n              className=\"text-sm text-muted-foreground hover:text-foreground transition-colors\"\n              data-testid=\"link-analytics\"\n            >\n              Analytics\n            </Link>\n            <Link\n              href=\"/app\"\n              className=\"text-sm text-muted-foreground hover:text-foreground transition-colors\"\n              data-testid=\"link-back-dashboard\"\n            >\n              Home\n            </Link>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-10\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-2xl font-semibold tracking-tight text-foreground\">\n            CSV Import\n          </h1>\n          <p className=\"text-sm text-muted-foreground mt-1\">\n            Upload a CSV file to import opportunities into your organization.\n          </p>\n        </div>\n\n        {/* Progress Steps */}\n        <div className=\"flex items-center gap-2 mb-8 text-sm\" data-testid=\"progress-steps\">\n          <StepIndicator label=\"Upload\" active={step === \"upload\"} done={step !== \"upload\"} num={1} />\n          <StepDivider />\n          <StepIndicator label=\"Map Columns\" active={step === \"mapping\"} done={step === \"importing\" || step === \"results\"} num={2} />\n          <StepDivider />\n          <StepIndicator label=\"Import\" active={step === \"importing\" || step === \"results\"} done={step === \"results\"} num={3} />\n        </div>\n\n        {error && (\n          <div className=\"mb-6 rounded-md border border-red-300 bg-red-50 dark:bg-red-950/20 dark:border-red-800 px-4 py-3 text-sm text-red-700 dark:text-red-400\" data-testid=\"text-error\">\n            {error}\n          </div>\n        )}\n\n        {/* Step 1: Upload */}\n        {step === \"upload\" && (\n          <div className=\"rounded-md border border-border bg-card p-6\" data-testid=\"section-upload\">\n            <h2 className=\"text-sm font-medium text-foreground mb-4\">Select CSV file</h2>\n            <p className=\"text-sm text-muted-foreground mb-4\">\n              Your CSV should include columns for: name, role, industry, source, amount, outcome. Optionally include created_at, closed_date, pipeline_accepted_date, segment, country.\n            </p>\n            <p className=\"text-xs text-muted-foreground mb-4\">\n              Values like &quot;NA&quot;, &quot;N/A&quot;, &quot;null&quot;, &quot;none&quot;, or empty cells are treated as missing data.\n            </p>\n            <div className=\"space-y-4\">\n              <div>\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\".csv\"\n                  onChange={(e) => setFile(e.target.files?.[0] || null)}\n                  className=\"block text-sm text-foreground file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-primary file:text-primary-foreground file:cursor-pointer cursor-pointer\"\n                  data-testid=\"input-file\"\n                />\n              </div>\n              <button\n                onClick={handleUpload}\n                disabled={!file || uploading}\n                className=\"inline-flex items-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground disabled:opacity-50 disabled:cursor-not-allowed\"\n                data-testid=\"button-upload\"\n              >\n                {uploading ? \"Parsing...\" : \"Upload & Preview\"}\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Step 2: Column Mapping */}\n        {step === \"mapping\" && uploadResult && (\n          <div className=\"space-y-6\">\n            <div className=\"rounded-md border border-border bg-card p-6\" data-testid=\"section-mapping\">\n              <div className=\"flex items-center justify-between gap-4 flex-wrap mb-4\">\n                <h2 className=\"text-sm font-medium text-foreground\">\n                  Column Mapping\n                </h2>\n                <span className=\"text-xs text-muted-foreground\" data-testid=\"text-file-info\">\n                  {uploadResult.filename} — {uploadResult.totalRows} rows\n                </span>\n              </div>\n              <p className=\"text-sm text-muted-foreground mb-4\">\n                Map each CSV column to the corresponding opportunity field.\n              </p>\n              <div className=\"grid gap-3 sm:grid-cols-2\">\n                {TARGET_FIELDS.map((field) => (\n                  <div key={field.key} className=\"flex flex-col gap-1\">\n                    <label className=\"text-xs font-medium text-foreground\">\n                      {field.label}\n                      {field.required && <span className=\"text-red-500 ml-0.5\">*</span>}\n                    </label>\n                    <select\n                      value={mapping[field.key] || \"\"}\n                      onChange={(e) => handleMappingChange(field.key, e.target.value)}\n                      className=\"rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground\"\n                      data-testid={`select-mapping-${field.key}`}\n                    >\n                      <option value=\"\">— Select column —</option>\n                      {uploadResult.headers.map((h) => (\n                        <option key={h} value={h}>\n                          {h}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* Import Mode */}\n            <div className=\"rounded-md border border-border bg-card p-6\" data-testid=\"section-import-mode\">\n              <h2 className=\"text-sm font-medium text-foreground mb-3\">Import Mode</h2>\n              <div className=\"flex flex-col gap-3\">\n                <label className=\"flex items-start gap-3 cursor-pointer\" data-testid=\"radio-mode-append\">\n                  <input\n                    type=\"radio\"\n                    name=\"importMode\"\n                    value=\"append\"\n                    checked={importMode === \"append\"}\n                    onChange={() => setImportMode(\"append\")}\n                    className=\"mt-0.5 text-primary focus:ring-primary/30\"\n                  />\n                  <div>\n                    <p className=\"text-sm font-medium text-foreground\">Append</p>\n                    <p className=\"text-xs text-muted-foreground\">Add this data alongside your existing opportunities. Previous imports are preserved.</p>\n                  </div>\n                </label>\n                <label className=\"flex items-start gap-3 cursor-pointer\" data-testid=\"radio-mode-replace\">\n                  <input\n                    type=\"radio\"\n                    name=\"importMode\"\n                    value=\"replace\"\n                    checked={importMode === \"replace\"}\n                    onChange={() => setImportMode(\"replace\")}\n                    className=\"mt-0.5 text-primary focus:ring-primary/30\"\n                  />\n                  <div>\n                    <p className=\"text-sm font-medium text-foreground\">Replace</p>\n                    <p className=\"text-xs text-muted-foreground\">Remove all existing opportunities and replace with this file. Previous import history is kept for reference but marked inactive.</p>\n                  </div>\n                </label>\n              </div>\n            </div>\n\n            {/* Preview */}\n            <div className=\"rounded-md border border-border bg-card p-6\" data-testid=\"section-preview\">\n              <h2 className=\"text-sm font-medium text-foreground mb-4\">\n                Preview (first {Math.min(20, uploadResult.preview.length)} rows)\n              </h2>\n              <div className=\"overflow-x-auto\">\n                <table className=\"min-w-full text-sm\">\n                  <thead>\n                    <tr className=\"border-b border-border\">\n                      <th className=\"px-3 py-2 text-left text-xs font-medium text-muted-foreground\">#</th>\n                      {uploadResult.headers.map((h) => (\n                        <th key={h} className=\"px-3 py-2 text-left text-xs font-medium text-muted-foreground whitespace-nowrap\">\n                          {h}\n                        </th>\n                      ))}\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {uploadResult.preview.map((row, i) => (\n                      <tr key={i} className=\"border-b border-border/50\">\n                        <td className=\"px-3 py-2 text-xs text-muted-foreground\">{i + 1}</td>\n                        {uploadResult.headers.map((h) => (\n                          <td key={h} className=\"px-3 py-2 text-xs text-foreground whitespace-nowrap max-w-[200px] truncate\">\n                            {row[h] || \"\"}\n                          </td>\n                        ))}\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-3 flex-wrap\">\n              <button\n                onClick={handleReset}\n                className=\"inline-flex items-center rounded-md border border-border bg-background px-4 py-2 text-sm font-medium text-foreground\"\n                data-testid=\"button-back-upload\"\n              >\n                Back\n              </button>\n              <button\n                onClick={handleImportClick}\n                disabled={!isMappingValid()}\n                className={`inline-flex items-center rounded-md px-4 py-2 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed ${\n                  importMode === \"replace\"\n                    ? \"bg-red-600 text-white hover:bg-red-700\"\n                    : \"bg-primary text-primary-foreground\"\n                }`}\n                data-testid=\"button-import\"\n              >\n                {importMode === \"replace\" ? \"Replace & Import\" : \"Import\"} {uploadResult.totalRows} Rows\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Replace Confirmation Modal */}\n        {showReplaceConfirm && (\n          <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\" data-testid=\"modal-replace-confirm\">\n            <div className=\"rounded-lg border border-border bg-card p-6 shadow-xl max-w-md mx-4\">\n              <div className=\"flex items-center gap-3 mb-4\">\n                <div className=\"inline-flex items-center justify-center w-10 h-10 rounded-full bg-red-100 dark:bg-red-950/30\">\n                  <svg className=\"w-5 h-5 text-red-600 dark:text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n                  </svg>\n                </div>\n                <h3 className=\"text-lg font-semibold text-foreground\">Replace Existing Data?</h3>\n              </div>\n              <p className=\"text-sm text-muted-foreground mb-6\">\n                This will remove all existing opportunities and replace them with the data from this file. Previous import history will be kept for reference but marked inactive. This action cannot be undone.\n              </p>\n              <div className=\"flex items-center justify-end gap-3\">\n                <button\n                  onClick={() => setShowReplaceConfirm(false)}\n                  className=\"inline-flex items-center rounded-md border border-border bg-background px-4 py-2 text-sm font-medium text-foreground\"\n                  data-testid=\"button-cancel-replace\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={doImport}\n                  className=\"inline-flex items-center rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700\"\n                  data-testid=\"button-confirm-replace\"\n                >\n                  Yes, Replace All Data\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Step 3: Importing */}\n        {step === \"importing\" && (\n          <div className=\"rounded-md border border-border bg-card p-6 text-center\" data-testid=\"section-importing\">\n            <div className=\"inline-flex items-center justify-center w-10 h-10 rounded-full bg-primary/10 mb-4\">\n              <svg className=\"w-5 h-5 text-primary animate-spin\" fill=\"none\" viewBox=\"0 0 24 24\">\n                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z\" />\n              </svg>\n            </div>\n            <p className=\"text-sm text-foreground font-medium\">Importing opportunities...</p>\n            <p className=\"text-xs text-muted-foreground mt-1\">This may take a moment.</p>\n          </div>\n        )}\n\n        {/* Step 4: Results */}\n        {step === \"results\" && importResult && (\n          <div className=\"space-y-6\">\n            <div className=\"rounded-md border border-border bg-card p-6\" data-testid=\"section-results\">\n              <h2 className=\"text-sm font-medium text-foreground mb-4\">Import Complete</h2>\n              <div className=\"grid gap-4 sm:grid-cols-3\">\n                <div className=\"rounded-md border border-border p-4\">\n                  <p className=\"text-xs text-muted-foreground\">Total Rows</p>\n                  <p className=\"text-2xl font-semibold text-foreground mt-1\" data-testid=\"text-total-rows\">\n                    {importResult.totalRows}\n                  </p>\n                </div>\n                <div className=\"rounded-md border border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-950/20 p-4\">\n                  <p className=\"text-xs text-green-700 dark:text-green-400\">Inserted</p>\n                  <p className=\"text-2xl font-semibold text-green-700 dark:text-green-400 mt-1\" data-testid=\"text-inserted-count\">\n                    {importResult.insertedCount}\n                  </p>\n                </div>\n                <div className={`rounded-md border p-4 ${importResult.errorCount > 0 ? \"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-950/20\" : \"border-border\"}`}>\n                  <p className={`text-xs ${importResult.errorCount > 0 ? \"text-red-700 dark:text-red-400\" : \"text-muted-foreground\"}`}>Errors</p>\n                  <p className={`text-2xl font-semibold mt-1 ${importResult.errorCount > 0 ? \"text-red-700 dark:text-red-400\" : \"text-foreground\"}`} data-testid=\"text-error-count\">\n                    {importResult.errorCount}\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            {importResult.errors.length > 0 && (\n              <div className=\"rounded-md border border-border bg-card p-6\" data-testid=\"section-error-details\">\n                <h2 className=\"text-sm font-medium text-foreground mb-4\">\n                  Error Details {importResult.errors.length < importResult.errorCount && `(showing first ${importResult.errors.length})`}\n                </h2>\n                <div className=\"overflow-x-auto\">\n                  <table className=\"min-w-full text-sm\">\n                    <thead>\n                      <tr className=\"border-b border-border\">\n                        <th className=\"px-3 py-2 text-left text-xs font-medium text-muted-foreground\">Row</th>\n                        <th className=\"px-3 py-2 text-left text-xs font-medium text-muted-foreground\">Error</th>\n                        <th className=\"px-3 py-2 text-left text-xs font-medium text-muted-foreground\">Data</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {importResult.errors.map((err, i) => (\n                        <tr key={i} className=\"border-b border-border/50\">\n                          <td className=\"px-3 py-2 text-xs text-foreground\" data-testid={`text-error-row-${i}`}>\n                            {err.row_number}\n                          </td>\n                          <td className=\"px-3 py-2 text-xs text-red-600 dark:text-red-400\" data-testid={`text-error-msg-${i}`}>\n                            {err.error_message}\n                          </td>\n                          <td className=\"px-3 py-2 text-xs text-muted-foreground font-mono max-w-[300px] truncate\">\n                            {JSON.stringify(err.raw_row_json)}\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            )}\n\n            <div className=\"flex items-center gap-3 flex-wrap\">\n              <button\n                onClick={handleReset}\n                className=\"inline-flex items-center rounded-md border border-border bg-background px-4 py-2 text-sm font-medium text-foreground\"\n                data-testid=\"button-import-another\"\n              >\n                Import Another File\n              </button>\n              <Link\n                href={`/app/dashboard${importResult.jobId ? `?dataset=${importResult.jobId}` : \"\"}`}\n                className=\"inline-flex items-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground\"\n                data-testid=\"link-view-analytics\"\n              >\n                View Analytics\n              </Link>\n            </div>\n          </div>\n        )}\n\n        {/* Import History */}\n        <div className=\"mt-12\" data-testid=\"section-import-history\">\n          <h2 className=\"text-lg font-semibold text-foreground mb-4\">Import History</h2>\n          {historyLoading ? (\n            <div className=\"flex items-center justify-center py-8\">\n              <svg className=\"w-5 h-5 text-primary animate-spin\" fill=\"none\" viewBox=\"0 0 24 24\">\n                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z\" />\n              </svg>\n            </div>\n          ) : importHistory.length === 0 ? (\n            <div className=\"rounded-md border border-border bg-card p-6 text-center\">\n              <p className=\"text-sm text-muted-foreground\">No imports yet. Upload a CSV file above to get started.</p>\n            </div>\n          ) : (\n            <div className=\"rounded-md border border-border bg-card overflow-hidden\">\n              <div className=\"overflow-x-auto\">\n                <table className=\"min-w-full text-sm\">\n                  <thead>\n                    <tr className=\"border-b border-border bg-muted/30\">\n                      <th className=\"px-4 py-3 text-left text-xs font-medium text-muted-foreground\">File</th>\n                      <th className=\"px-4 py-3 text-left text-xs font-medium text-muted-foreground\">Mode</th>\n                      <th className=\"px-4 py-3 text-left text-xs font-medium text-muted-foreground\">Status</th>\n                      <th className=\"px-4 py-3 text-right text-xs font-medium text-muted-foreground\">Rows</th>\n                      <th className=\"px-4 py-3 text-right text-xs font-medium text-muted-foreground\">Inserted</th>\n                      <th className=\"px-4 py-3 text-right text-xs font-medium text-muted-foreground\">Errors</th>\n                      <th className=\"px-4 py-3 text-left text-xs font-medium text-muted-foreground\">Date</th>\n                      <th className=\"px-4 py-3 text-left text-xs font-medium text-muted-foreground\">Actions</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {importHistory.map((job) => (\n                      <tr key={job.id} className={`border-b border-border/50 ${!job.is_active ? \"opacity-50\" : \"\"}`} data-testid={`import-job-${job.id}`}>\n                        <td className=\"px-4 py-3 text-foreground font-medium whitespace-nowrap max-w-[200px] truncate\">\n                          {job.filename}\n                        </td>\n                        <td className=\"px-4 py-3\">\n                          <span className={`inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-medium ${\n                            job.import_mode === \"replace\"\n                              ? \"bg-amber-100 dark:bg-amber-950/30 text-amber-700 dark:text-amber-400\"\n                              : \"bg-blue-100 dark:bg-blue-950/30 text-blue-700 dark:text-blue-400\"\n                          }`}>\n                            {job.import_mode}\n                          </span>\n                        </td>\n                        <td className=\"px-4 py-3\">\n                          <StatusBadge status={job.status} isActive={job.is_active} />\n                        </td>\n                        <td className=\"px-4 py-3 text-right text-foreground\">{job.row_count}</td>\n                        <td className=\"px-4 py-3 text-right text-green-600 dark:text-green-400\">{job.inserted_count}</td>\n                        <td className={`px-4 py-3 text-right ${job.error_count > 0 ? \"text-red-600 dark:text-red-400\" : \"text-foreground\"}`}>\n                          {job.error_count}\n                        </td>\n                        <td className=\"px-4 py-3 text-muted-foreground whitespace-nowrap\">\n                          {new Date(job.created_at).toLocaleDateString()} {new Date(job.created_at).toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" })}\n                        </td>\n                        <td className=\"px-4 py-3\">\n                          {job.status === \"completed\" && job.is_active && (\n                            <Link\n                              href={`/app/dashboard?dataset=${job.id}`}\n                              className=\"text-xs text-primary hover:underline\"\n                              data-testid={`link-analytics-${job.id}`}\n                            >\n                              View Analytics\n                            </Link>\n                          )}\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          )}\n        </div>\n      </main>\n    </div>\n  );\n}\n\nfunction StatusBadge({ status, isActive }: { status: string; isActive: boolean }) {\n  if (!isActive) {\n    return (\n      <span className=\"inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-medium bg-muted text-muted-foreground\">\n        inactive\n      </span>\n    );\n  }\n\n  const styles: Record<string, string> = {\n    completed: \"bg-green-100 dark:bg-green-950/30 text-green-700 dark:text-green-400\",\n    running: \"bg-blue-100 dark:bg-blue-950/30 text-blue-700 dark:text-blue-400\",\n    pending: \"bg-yellow-100 dark:bg-yellow-950/30 text-yellow-700 dark:text-yellow-400\",\n    failed: \"bg-red-100 dark:bg-red-950/30 text-red-700 dark:text-red-400\",\n  };\n\n  return (\n    <span className={`inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-medium ${styles[status] || styles.pending}`}>\n      {status}\n    </span>\n  );\n}\n\nfunction StepIndicator({ label, active, done, num }: { label: string; active: boolean; done: boolean; num: number }) {\n  return (\n    <div className=\"flex items-center gap-2\">\n      <span\n        className={`inline-flex items-center justify-center w-6 h-6 rounded-full text-xs font-medium ${\n          done && !active\n            ? \"bg-primary text-primary-foreground\"\n            : active\n            ? \"bg-primary/20 text-primary border border-primary\"\n            : \"bg-muted text-muted-foreground\"\n        }`}\n      >\n        {done && !active ? (\n          <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M5 13l4 4L19 7\" />\n          </svg>\n        ) : (\n          num\n        )}\n      </span>\n      <span className={`text-xs ${active ? \"text-foreground font-medium\" : \"text-muted-foreground\"}`}>\n        {label}\n      </span>\n    </div>\n  );\n}\n\nfunction StepDivider() {\n  return <div className=\"flex-1 h-px bg-border max-w-[60px]\" />;\n}\n"],"names":[],"mappings":"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"}}]
}