{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/date-filter.ts"],"sourcesContent":["export const DATE_MODES = [\"closed_date\", \"pipeline_accepted_date\", \"created_at\"] as const;\nexport type DateMode = (typeof DATE_MODES)[number];\n\nexport const PERIODS = [\"7d\", \"30d\", \"90d\", \"mtd\", \"qtd\", \"custom\"] as const;\nexport type Period = (typeof PERIODS)[number];\n\nexport const DATE_MODE_LABELS: Record<DateMode, string> = {\n  closed_date: \"Closed Date\",\n  pipeline_accepted_date: \"Pipeline Accepted Date\",\n  created_at: \"Created Date\",\n};\n\nexport const PERIOD_LABELS: Record<Period, string> = {\n  \"7d\": \"Last 7 days\",\n  \"30d\": \"Last 30 days\",\n  \"90d\": \"Last 90 days\",\n  mtd: \"Month to date\",\n  qtd: \"Quarter to date\",\n  custom: \"Custom range\",\n};\n\nexport type DateFilterParams = {\n  dateMode: DateMode;\n  period: Period;\n  from?: string;\n  to?: string;\n};\n\nexport type ResolvedDateFilter = {\n  dateField: DateMode;\n  dateFrom: string;\n  dateTo: string;\n  periodLabel: string;\n};\n\nfunction startOfDay(d: Date): Date {\n  return new Date(d.getFullYear(), d.getMonth(), d.getDate());\n}\n\nfunction endOfDay(d: Date): Date {\n  return new Date(d.getFullYear(), d.getMonth(), d.getDate(), 23, 59, 59, 999);\n}\n\nfunction quarterStart(d: Date): Date {\n  const q = Math.floor(d.getMonth() / 3) * 3;\n  return new Date(d.getFullYear(), q, 1);\n}\n\nexport function resolveDateFilter(params: DateFilterParams): ResolvedDateFilter {\n  const now = new Date();\n  const dateField = DATE_MODES.includes(params.dateMode) ? params.dateMode : \"created_at\";\n  const period = PERIODS.includes(params.period) ? params.period : \"30d\";\n\n  let dateFrom: Date;\n  let dateTo: Date = endOfDay(now);\n\n  switch (period) {\n    case \"7d\":\n      dateFrom = startOfDay(new Date(now.getTime() - 7 * 86400000));\n      break;\n    case \"30d\":\n      dateFrom = startOfDay(new Date(now.getTime() - 30 * 86400000));\n      break;\n    case \"90d\":\n      dateFrom = startOfDay(new Date(now.getTime() - 90 * 86400000));\n      break;\n    case \"mtd\":\n      dateFrom = new Date(now.getFullYear(), now.getMonth(), 1);\n      break;\n    case \"qtd\":\n      dateFrom = quarterStart(now);\n      break;\n    case \"custom\":\n      dateFrom = params.from ? startOfDay(new Date(params.from)) : startOfDay(new Date(now.getTime() - 30 * 86400000));\n      dateTo = params.to ? endOfDay(new Date(params.to)) : endOfDay(now);\n      if (isNaN(dateFrom.getTime())) dateFrom = startOfDay(new Date(now.getTime() - 30 * 86400000));\n      if (isNaN(dateTo.getTime())) dateTo = endOfDay(now);\n      break;\n    default:\n      dateFrom = startOfDay(new Date(now.getTime() - 30 * 86400000));\n  }\n\n  return {\n    dateField,\n    dateFrom: dateFrom.toISOString(),\n    dateTo: dateTo.toISOString(),\n    periodLabel: period === \"custom\"\n      ? `${dateFrom.toLocaleDateString()} – ${dateTo.toLocaleDateString()}`\n      : PERIOD_LABELS[period],\n  };\n}\n\nexport function parseDateFilterFromSearchParams(params: URLSearchParams): DateFilterParams {\n  return {\n    dateMode: (params.get(\"date_mode\") as DateMode) || \"created_at\",\n    period: (params.get(\"period\") as Period) || \"30d\",\n    from: params.get(\"from\") || undefined,\n    to: params.get(\"to\") || undefined,\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAO,MAAM,aAAa;IAAC;IAAe;IAA0B;CAAa;AAG1E,MAAM,UAAU;IAAC;IAAM;IAAO;IAAO;IAAO;IAAO;CAAS;AAG5D,MAAM,mBAA6C;IACxD,aAAa;IACb,wBAAwB;IACxB,YAAY;AACd;AAEO,MAAM,gBAAwC;IACnD,MAAM;IACN,OAAO;IACP,OAAO;IACP,KAAK;IACL,KAAK;IACL,QAAQ;AACV;AAgBA,SAAS,WAAW,CAAO;IACzB,OAAO,IAAI,KAAK,EAAE,WAAW,IAAI,EAAE,QAAQ,IAAI,EAAE,OAAO;AAC1D;AAEA,SAAS,SAAS,CAAO;IACvB,OAAO,IAAI,KAAK,EAAE,WAAW,IAAI,EAAE,QAAQ,IAAI,EAAE,OAAO,IAAI,IAAI,IAAI,IAAI;AAC1E;AAEA,SAAS,aAAa,CAAO;IAC3B,MAAM,IAAI,KAAK,KAAK,CAAC,EAAE,QAAQ,KAAK,KAAK;IACzC,OAAO,IAAI,KAAK,EAAE,WAAW,IAAI,GAAG;AACtC;AAEO,SAAS,kBAAkB,MAAwB;IACxD,MAAM,MAAM,IAAI;IAChB,MAAM,YAAY,WAAW,QAAQ,CAAC,OAAO,QAAQ,IAAI,OAAO,QAAQ,GAAG;IAC3E,MAAM,SAAS,QAAQ,QAAQ,CAAC,OAAO,MAAM,IAAI,OAAO,MAAM,GAAG;IAEjE,IAAI;IACJ,IAAI,SAAe,SAAS;IAE5B,OAAQ;QACN,KAAK;YACH,WAAW,WAAW,IAAI,KAAK,IAAI,OAAO,KAAK,IAAI;YACnD;QACF,KAAK;YACH,WAAW,WAAW,IAAI,KAAK,IAAI,OAAO,KAAK,KAAK;YACpD;QACF,KAAK;YACH,WAAW,WAAW,IAAI,KAAK,IAAI,OAAO,KAAK,KAAK;YACpD;QACF,KAAK;YACH,WAAW,IAAI,KAAK,IAAI,WAAW,IAAI,IAAI,QAAQ,IAAI;YACvD;QACF,KAAK;YACH,WAAW,aAAa;YACxB;QACF,KAAK;YACH,WAAW,OAAO,IAAI,GAAG,WAAW,IAAI,KAAK,OAAO,IAAI,KAAK,WAAW,IAAI,KAAK,IAAI,OAAO,KAAK,KAAK;YACtG,SAAS,OAAO,EAAE,GAAG,SAAS,IAAI,KAAK,OAAO,EAAE,KAAK,SAAS;YAC9D,IAAI,MAAM,SAAS,OAAO,KAAK,WAAW,WAAW,IAAI,KAAK,IAAI,OAAO,KAAK,KAAK;YACnF,IAAI,MAAM,OAAO,OAAO,KAAK,SAAS,SAAS;YAC/C;QACF;YACE,WAAW,WAAW,IAAI,KAAK,IAAI,OAAO,KAAK,KAAK;IACxD;IAEA,OAAO;QACL;QACA,UAAU,SAAS,WAAW;QAC9B,QAAQ,OAAO,WAAW;QAC1B,aAAa,WAAW,WACpB,GAAG,SAAS,kBAAkB,GAAG,GAAG,EAAE,OAAO,kBAAkB,IAAI,GACnE,aAAa,CAAC,OAAO;IAC3B;AACF;AAEO,SAAS,gCAAgC,MAAuB;IACrE,OAAO;QACL,UAAU,AAAC,OAAO,GAAG,CAAC,gBAA6B;QACnD,QAAQ,AAAC,OAAO,GAAG,CAAC,aAAwB;QAC5C,MAAM,OAAO,GAAG,CAAC,WAAW;QAC5B,IAAI,OAAO,GAAG,CAAC,SAAS;IAC1B;AACF"}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/dimension-filter.ts"],"sourcesContent":["export const DIMENSION_KEYS = [\n  \"segment\",\n  \"country\",\n  \"source\",\n  \"industry\",\n  \"role\",\n  \"industry_cluster\",\n  \"source_group\",\n] as const;\nexport type DimensionKey = (typeof DIMENSION_KEYS)[number];\n\nexport const DIMENSION_LABELS: Record<DimensionKey, string> = {\n  segment: \"Segment\",\n  country: \"Country\",\n  source: \"Source\",\n  industry: \"Industry\",\n  role: \"Champion Role\",\n  industry_cluster: \"Industry Cluster\",\n  source_group: \"Source Group\",\n};\n\nexport const ENRICHED_DIMENSION_KEYS: DimensionKey[] = [\"industry_cluster\", \"source_group\"];\nexport const RAW_DIMENSION_KEYS: DimensionKey[] = [\"segment\", \"country\", \"source\", \"industry\", \"role\"];\n\nexport const UNKNOWN_VALUE = \"Unknown\";\n\nexport type DimensionFilters = Partial<Record<DimensionKey, string[]>>;\n\nexport function parseDimensionFiltersFromSearchParams(\n  params: URLSearchParams\n): DimensionFilters {\n  const filters: DimensionFilters = {};\n  for (const key of DIMENSION_KEYS) {\n    const values = params.getAll(key);\n    if (values.length > 0) {\n      filters[key] = values;\n    }\n  }\n  return filters;\n}\n\nexport function parseDimensionFiltersFromBody(\n  body: Record<string, any>\n): DimensionFilters {\n  const filters: DimensionFilters = {};\n  for (const key of DIMENSION_KEYS) {\n    if (Array.isArray(body[key]) && body[key].length > 0) {\n      filters[key] = body[key].map((v: any) => String(v));\n    }\n  }\n  return filters;\n}\n\nexport function applyDimensionFiltersInMemory<T extends Record<string, any>>(\n  items: T[],\n  filters: DimensionFilters\n): T[] {\n  let filtered = items;\n  for (const [key, values] of Object.entries(filters)) {\n    if (!values || values.length === 0) continue;\n    const hasUnknown = values.includes(UNKNOWN_VALUE);\n    const nonUnknownValues = values.filter((v) => v !== UNKNOWN_VALUE);\n\n    filtered = filtered.filter((item) => {\n      const val = item[key];\n      if (val === null || val === undefined || val === \"\") {\n        return hasUnknown;\n      }\n      return nonUnknownValues.includes(val);\n    });\n  }\n  return filtered;\n}\n\nexport function hasActiveDimensionFilters(filters: DimensionFilters): boolean {\n  return Object.values(filters).some((v) => v && v.length > 0);\n}\n\nexport function describeDimensionFilters(filters: DimensionFilters): string {\n  const parts: string[] = [];\n  for (const key of DIMENSION_KEYS) {\n    const values = filters[key];\n    if (values && values.length > 0) {\n      parts.push(`${DIMENSION_LABELS[key]}: ${values.join(\", \")}`);\n    }\n  }\n  return parts.length > 0 ? parts.join(\" | \") : \"None\";\n}\n\nexport function dimensionFiltersToSearchParams(\n  filters: DimensionFilters,\n  params: URLSearchParams\n): void {\n  for (const key of DIMENSION_KEYS) {\n    params.delete(key);\n    const values = filters[key];\n    if (values && values.length > 0) {\n      for (const v of values) {\n        params.append(key, v);\n      }\n    }\n  }\n}"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAO,MAAM,iBAAiB;IAC5B;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAGM,MAAM,mBAAiD;IAC5D,SAAS;IACT,SAAS;IACT,QAAQ;IACR,UAAU;IACV,MAAM;IACN,kBAAkB;IAClB,cAAc;AAChB;AAEO,MAAM,0BAA0C;IAAC;IAAoB;CAAe;AACpF,MAAM,qBAAqC;IAAC;IAAW;IAAW;IAAU;IAAY;CAAO;AAE/F,MAAM,gBAAgB;AAItB,SAAS,sCACd,MAAuB;IAEvB,MAAM,UAA4B,CAAC;IACnC,KAAK,MAAM,OAAO,eAAgB;QAChC,MAAM,SAAS,OAAO,MAAM,CAAC;QAC7B,IAAI,OAAO,MAAM,GAAG,GAAG;YACrB,OAAO,CAAC,IAAI,GAAG;QACjB;IACF;IACA,OAAO;AACT;AAEO,SAAS,8BACd,IAAyB;IAEzB,MAAM,UAA4B,CAAC;IACnC,KAAK,MAAM,OAAO,eAAgB;QAChC,IAAI,MAAM,OAAO,CAAC,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,GAAG;YACpD,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAW,OAAO;QAClD;IACF;IACA,OAAO;AACT;AAEO,SAAS,8BACd,KAAU,EACV,OAAyB;IAEzB,IAAI,WAAW;IACf,KAAK,MAAM,CAAC,KAAK,OAAO,IAAI,OAAO,OAAO,CAAC,SAAU;QACnD,IAAI,CAAC,UAAU,OAAO,MAAM,KAAK,GAAG;QACpC,MAAM,aAAa,OAAO,QAAQ,CAAC;QACnC,MAAM,mBAAmB,OAAO,MAAM,CAAC,CAAC,IAAM,MAAM;QAEpD,WAAW,SAAS,MAAM,CAAC,CAAC;YAC1B,MAAM,MAAM,IAAI,CAAC,IAAI;YACrB,IAAI,QAAQ,QAAQ,QAAQ,aAAa,QAAQ,IAAI;gBACnD,OAAO;YACT;YACA,OAAO,iBAAiB,QAAQ,CAAC;QACnC;IACF;IACA,OAAO;AACT;AAEO,SAAS,0BAA0B,OAAyB;IACjE,OAAO,OAAO,MAAM,CAAC,SAAS,IAAI,CAAC,CAAC,IAAM,KAAK,EAAE,MAAM,GAAG;AAC5D;AAEO,SAAS,yBAAyB,OAAyB;IAChE,MAAM,QAAkB,EAAE;IAC1B,KAAK,MAAM,OAAO,eAAgB;QAChC,MAAM,SAAS,OAAO,CAAC,IAAI;QAC3B,IAAI,UAAU,OAAO,MAAM,GAAG,GAAG;YAC/B,MAAM,IAAI,CAAC,GAAG,gBAAgB,CAAC,IAAI,CAAC,EAAE,EAAE,OAAO,IAAI,CAAC,OAAO;QAC7D;IACF;IACA,OAAO,MAAM,MAAM,GAAG,IAAI,MAAM,IAAI,CAAC,SAAS;AAChD;AAEO,SAAS,+BACd,OAAyB,EACzB,MAAuB;IAEvB,KAAK,MAAM,OAAO,eAAgB;QAChC,OAAO,MAAM,CAAC;QACd,MAAM,SAAS,OAAO,CAAC,IAAI;QAC3B,IAAI,UAAU,OAAO,MAAM,GAAG,GAAG;YAC/B,KAAK,MAAM,KAAK,OAAQ;gBACtB,OAAO,MAAM,CAAC,KAAK;YACrB;QACF;IACF;AACF"}},
    {"offset": {"line": 221, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useCallback, Suspense } from \"react\";\nimport { useSearchParams, useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\nimport {\n  DATE_MODES,\n  PERIODS,\n  DATE_MODE_LABELS,\n  PERIOD_LABELS,\n  type DateMode,\n  type Period,\n} from \"@/lib/date-filter\";\nimport {\n  DIMENSION_KEYS,\n  DIMENSION_LABELS,\n  UNKNOWN_VALUE,\n  type DimensionKey,\n  type DimensionFilters,\n} from \"@/lib/dimension-filter\";\n\ntype Totals = {\n  count: number;\n  won: number;\n  lost: number;\n  open: number;\n  winRate: number | null;\n  avgAmountWon: number | null;\n};\n\ntype BreakdownRow = {\n  label: string;\n  count: number;\n  won: number;\n  lost: number;\n  open: number;\n  winRate: number | null;\n  avgAmountWon: number | null;\n};\n\ntype FilterMeta = {\n  dateMode: string;\n  dateModeLabel: string;\n  dateFrom: string;\n  dateTo: string;\n  periodLabel: string;\n  includedCount: number;\n  excludedNullCount: number;\n  totalOrgCount: number;\n  activeDimensionFilters: string | null;\n};\n\ntype CoverageInfo = {\n  nonNullCount: number;\n  percentage: number;\n  sufficient: boolean;\n};\n\ntype CoverageData = {\n  role: CoverageInfo;\n  industry: CoverageInfo;\n  source: CoverageInfo;\n  segment: CoverageInfo;\n  country: CoverageInfo;\n};\n\ntype SummaryData = {\n  totals: Totals;\n  byRole: BreakdownRow[];\n  byIndustry: BreakdownRow[];\n  bySource: BreakdownRow[];\n  bySegment: BreakdownRow[];\n  byCountry: BreakdownRow[];\n  coverage?: CoverageData;\n  filter: FilterMeta;\n};\n\ntype AiInsight = {\n  title: string;\n  description: string;\n  type: \"strength\" | \"risk\" | \"pattern\";\n};\n\ntype AiStageSection = {\n  headline: string;\n  insights: AiInsight[];\n};\n\ntype AiAnalysis = {\n  summary: string;\n  openPipeline: AiStageSection;\n  closedWon: AiStageSection;\n  closedLost: AiStageSection;\n  recommendations: string[];\n};\n\nfunction fmtPct(v: number | null): string {\n  if (v === null) return \"\\u2014\";\n  return `${(v * 100).toFixed(1)}%`;\n}\n\nfunction fmtCurrency(v: number | null): string {\n  if (v === null) return \"\\u2014\";\n  return new Intl.NumberFormat(\"en-US\", {\n    style: \"currency\",\n    currency: \"USD\",\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  }).format(v);\n}\n\nexport default function DashboardPage() {\n  return (\n    <Suspense fallback={\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"inline-flex items-center justify-center w-10 h-10 rounded-full bg-primary/10\">\n          <svg className=\"w-5 h-5 text-primary animate-spin\" fill=\"none\" viewBox=\"0 0 24 24\">\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z\" />\n          </svg>\n        </div>\n      </div>\n    }>\n      <DashboardContent />\n    </Suspense>\n  );\n}\n\ntype DatasetOption = {\n  id: string;\n  filename: string;\n  inserted_count: number;\n  created_at: string;\n};\n\nfunction DashboardContent() {\n  const searchParams = useSearchParams();\n  const router = useRouter();\n\n  const dateMode = (searchParams.get(\"date_mode\") as DateMode) || \"created_at\";\n  const period = (searchParams.get(\"period\") as Period) || \"30d\";\n  const customFrom = searchParams.get(\"from\") || \"\";\n  const customTo = searchParams.get(\"to\") || \"\";\n  const datasetParam = searchParams.get(\"dataset\") || \"\";\n\n  const initialDimFilters: DimensionFilters = {};\n  for (const key of DIMENSION_KEYS) {\n    const vals = searchParams.getAll(key);\n    if (vals.length > 0) initialDimFilters[key] = vals;\n  }\n\n  const [data, setData] = useState<SummaryData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n  const [aiAnalysis, setAiAnalysis] = useState<AiAnalysis | null>(null);\n  const [aiLoading, setAiLoading] = useState(false);\n  const [aiError, setAiError] = useState(\"\");\n\n  const [dimFilters, setDimFilters] = useState<DimensionFilters>(initialDimFilters);\n  const [dimOptions, setDimOptions] = useState<Record<string, string[]>>({});\n  const [filtersOpen, setFiltersOpen] = useState(() => {\n    return Object.values(initialDimFilters).some((v) => v && v.length > 0);\n  });\n  const [datasets, setDatasets] = useState<DatasetOption[]>([]);\n  const [selectedDataset, setSelectedDataset] = useState(datasetParam);\n\n  useEffect(() => {\n    async function loadDatasets() {\n      try {\n        const res = await fetch(\"/api/import/jobs\");\n        if (res.ok) {\n          const json = await res.json();\n          const activeCompleted = (json.jobs || [])\n            .filter((j: any) => j.is_active && j.status === \"completed\" && j.inserted_count > 0)\n            .map((j: any) => ({\n              id: j.id,\n              filename: j.filename,\n              inserted_count: j.inserted_count,\n              created_at: j.created_at,\n            }));\n          setDatasets(activeCompleted);\n        }\n      } catch {}\n    }\n    loadDatasets();\n  }, []);\n\n  function handleDatasetChange(newDataset: string) {\n    setSelectedDataset(newDataset);\n    const params = new URLSearchParams(searchParams.toString());\n    if (newDataset) {\n      params.set(\"dataset\", newDataset);\n    } else {\n      params.delete(\"dataset\");\n    }\n    router.replace(`?${params.toString()}`, { scroll: false });\n  }\n\n  function updateFilter(updates: Record<string, string>) {\n    const params = new URLSearchParams(searchParams.toString());\n    for (const [k, v] of Object.entries(updates)) {\n      if (v) {\n        params.set(k, v);\n      } else {\n        params.delete(k);\n      }\n    }\n    if (params.get(\"period\") !== \"custom\") {\n      params.delete(\"from\");\n      params.delete(\"to\");\n    }\n    if (selectedDataset) {\n      params.set(\"dataset\", selectedDataset);\n    }\n    for (const key of DIMENSION_KEYS) {\n      params.delete(key);\n      const vals = dimFilters[key];\n      if (vals) {\n        for (const v of vals) params.append(key, v);\n      }\n    }\n    router.replace(`?${params.toString()}`, { scroll: false });\n  }\n\n  function syncDimFiltersToUrl(newFilters: DimensionFilters) {\n    const params = new URLSearchParams(searchParams.toString());\n    for (const key of DIMENSION_KEYS) {\n      params.delete(key);\n      const vals = newFilters[key];\n      if (vals && vals.length > 0) {\n        for (const v of vals) params.append(key, v);\n      }\n    }\n    router.replace(`?${params.toString()}`, { scroll: false });\n  }\n\n  function toggleDimValue(dim: DimensionKey, value: string) {\n    setDimFilters((prev) => {\n      const current = prev[dim] || [];\n      const next = current.includes(value)\n        ? current.filter((v) => v !== value)\n        : [...current, value];\n      const updated = { ...prev, [dim]: next.length > 0 ? next : undefined };\n      if (next.length === 0) delete updated[dim];\n      syncDimFiltersToUrl(updated);\n      return updated;\n    });\n  }\n\n  function clearAllDimFilters() {\n    setDimFilters({});\n    const params = new URLSearchParams(searchParams.toString());\n    for (const key of DIMENSION_KEYS) params.delete(key);\n    router.replace(`?${params.toString()}`, { scroll: false });\n  }\n\n  const activeDimFilterCount = Object.values(dimFilters).reduce(\n    (sum, vals) => sum + (vals?.length || 0),\n    0\n  );\n\n  const fetchDimensions = useCallback(async () => {\n    try {\n      const params = new URLSearchParams();\n      params.set(\"date_mode\", dateMode);\n      params.set(\"period\", period);\n      if (period === \"custom\") {\n        if (customFrom) params.set(\"from\", customFrom);\n        if (customTo) params.set(\"to\", customTo);\n      }\n      if (selectedDataset) params.set(\"dataset\", selectedDataset);\n      const res = await fetch(`/api/analytics/dimensions?${params.toString()}`);\n      if (res.ok) {\n        const json = await res.json();\n        setDimOptions(json.dimensions || {});\n      }\n    } catch {}\n  }, [dateMode, period, customFrom, customTo, selectedDataset]);\n\n  const fetchData = useCallback(async () => {\n    setLoading(true);\n    setError(\"\");\n    try {\n      const params = new URLSearchParams();\n      params.set(\"date_mode\", dateMode);\n      params.set(\"period\", period);\n      if (period === \"custom\") {\n        if (customFrom) params.set(\"from\", customFrom);\n        if (customTo) params.set(\"to\", customTo);\n      }\n      if (selectedDataset) params.set(\"dataset\", selectedDataset);\n      for (const key of DIMENSION_KEYS) {\n        const vals = dimFilters[key];\n        if (vals && vals.length > 0) {\n          for (const v of vals) params.append(key, v);\n        }\n      }\n      const res = await fetch(`/api/analytics/summary?${params.toString()}`);\n      if (!res.ok) {\n        const body = await res.json().catch(() => ({}));\n        setError(body.error || \"Failed to load analytics\");\n        return;\n      }\n      setData(await res.json());\n    } catch {\n      setError(\"Failed to load analytics\");\n    } finally {\n      setLoading(false);\n    }\n  }, [dateMode, period, customFrom, customTo, dimFilters, selectedDataset]);\n\n  useEffect(() => {\n    fetchDimensions();\n  }, [fetchDimensions]);\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n\n  async function runAiAnalysis() {\n    setAiLoading(true);\n    setAiError(\"\");\n    setAiAnalysis(null);\n    try {\n      const body: Record<string, any> = {\n        date_mode: dateMode,\n        period: period,\n      };\n      if (period === \"custom\") {\n        if (customFrom) body.from = customFrom;\n        if (customTo) body.to = customTo;\n      }\n      if (selectedDataset) body.dataset = selectedDataset;\n      for (const key of DIMENSION_KEYS) {\n        const vals = dimFilters[key];\n        if (vals && vals.length > 0) {\n          body[key] = vals;\n        }\n      }\n      const res = await fetch(\"/api/ai/analyze\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(body),\n      });\n      if (!res.ok) {\n        const json = await res.json().catch(() => ({}));\n        setAiError(json.error || \"AI analysis failed\");\n        return;\n      }\n      const json = await res.json();\n      setAiAnalysis(json.analysis);\n    } catch {\n      setAiError(\"AI analysis failed. Please try again.\");\n    } finally {\n      setAiLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Page header — no inner nav links, sidebar handles navigation */}\n      <header\n        className=\"sticky top-0 z-10 border-b border-border bg-background/95\"\n        style={{ backdropFilter: \"blur(8px)\" }}\n      >\n        <div className=\"max-w-6xl mx-auto px-6 h-14 flex items-center justify-between gap-4\">\n          <div className=\"flex items-center gap-2.5\">\n            <div\n              className=\"inline-flex items-center justify-center w-7 h-7\"\n              style={{\n                background: \"var(--teal-50)\",\n                borderRadius: \"6px\",\n                border: \"1px solid var(--teal-200)\",\n              }}\n            >\n              <svg className=\"w-3.5 h-3.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" style={{ color: \"var(--teal-600)\" }}>\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n              </svg>\n            </div>\n            <span className=\"text-[13px] font-semibold text-foreground\" data-testid=\"text-dashboard-title\">\n              Analytics\n            </span>\n          </div>\n          {data && (\n            <span className=\"text-[12px] text-muted-foreground\">\n              {data.filter.includedCount} opportunities · {data.filter.dateFrom} – {data.filter.dateTo}\n            </span>\n          )}\n        </div>\n      </header>\n\n      <main className=\"max-w-6xl mx-auto px-6 py-8\">\n        {/* Filter Bar */}\n        <div\n          className=\"rounded-lg border border-border bg-card p-4 mb-6\"\n          style={{ boxShadow: \"var(--shadow-xs)\" }}\n          data-testid=\"filter-bar\"\n        >\n          <div className=\"flex flex-wrap items-end gap-3\">\n            {datasets.length > 0 && (\n              <div className=\"flex flex-col gap-1\">\n                <label className=\"text-[11px] font-medium text-muted-foreground uppercase tracking-wide\" htmlFor=\"dataset-select\">\n                  Dataset\n                </label>\n                <select\n                  id=\"dataset-select\"\n                  value={selectedDataset}\n                  onChange={(e) => handleDatasetChange(e.target.value)}\n                  className=\"rounded-md border border-border bg-background px-3 py-1.5 text-[13px] text-foreground focus:outline-none focus:ring-2 focus:ring-ring/30 h-8\"\n                  data-testid=\"select-dataset\"\n                >\n                  <option value=\"\">All Data</option>\n                  {datasets.map((ds) => (\n                    <option key={ds.id} value={ds.id}>\n                      {ds.filename} ({ds.inserted_count})\n                    </option>\n                  ))}\n                </select>\n              </div>\n            )}\n\n            <div className=\"flex flex-col gap-1\">\n              <label className=\"text-[11px] font-medium text-muted-foreground uppercase tracking-wide\">\n                Date Mode\n              </label>\n              <select\n                value={dateMode}\n                onChange={(e) => updateFilter({ date_mode: e.target.value })}\n                className=\"rounded-md border border-border bg-background px-3 py-1.5 text-[13px] text-foreground focus:outline-none focus:ring-2 focus:ring-ring/30 h-8\"\n                data-testid=\"select-date-mode\"\n              >\n                {DATE_MODES.map((m) => (\n                  <option key={m} value={m}>{DATE_MODE_LABELS[m]}</option>\n                ))}\n              </select>\n            </div>\n\n            <div className=\"flex flex-col gap-1\">\n              <label className=\"text-[11px] font-medium text-muted-foreground uppercase tracking-wide\">\n                Time Period\n              </label>\n              <select\n                value={period}\n                onChange={(e) => updateFilter({ period: e.target.value })}\n                className=\"rounded-md border border-border bg-background px-3 py-1.5 text-[13px] text-foreground focus:outline-none focus:ring-2 focus:ring-ring/30 h-8\"\n                data-testid=\"select-period\"\n              >\n                {PERIODS.map((p) => (\n                  <option key={p} value={p}>{PERIOD_LABELS[p]}</option>\n                ))}\n              </select>\n            </div>\n\n            {period === \"custom\" && (\n              <>\n                <div className=\"flex flex-col gap-1\">\n                  <label className=\"text-[11px] font-medium text-muted-foreground uppercase tracking-wide\">From</label>\n                  <input\n                    type=\"date\"\n                    value={customFrom}\n                    onChange={(e) => updateFilter({ from: e.target.value })}\n                    className=\"rounded-md border border-border bg-background px-3 py-1.5 text-[13px] text-foreground focus:outline-none focus:ring-2 focus:ring-ring/30 h-8\"\n                    data-testid=\"input-from\"\n                  />\n                </div>\n                <div className=\"flex flex-col gap-1\">\n                  <label className=\"text-[11px] font-medium text-muted-foreground uppercase tracking-wide\">To</label>\n                  <input\n                    type=\"date\"\n                    value={customTo}\n                    onChange={(e) => updateFilter({ to: e.target.value })}\n                    className=\"rounded-md border border-border bg-background px-3 py-1.5 text-[13px] text-foreground focus:outline-none focus:ring-2 focus:ring-ring/30 h-8\"\n                    data-testid=\"input-to\"\n                  />\n                </div>\n              </>\n            )}\n\n            <div className=\"ml-auto flex items-end\">\n              <button\n                onClick={() => setFiltersOpen((v) => !v)}\n                className=\"inline-flex items-center gap-1.5 rounded-md border border-border bg-background px-3 py-1.5 text-[13px] font-medium text-foreground h-8 transition-colors hover:bg-muted\"\n                data-testid=\"button-filters\"\n              >\n                <svg className=\"w-3.5 h-3.5 text-muted-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2a1 1 0 01-.293.707L13 13.414V19a1 1 0 01-.553.894l-4 2A1 1 0 017 21v-7.586L3.293 6.707A1 1 0 013 6V4z\" />\n                </svg>\n                Filters\n                {activeDimFilterCount > 0 && (\n                  <span\n                    className=\"inline-flex items-center justify-center w-4 h-4 rounded-full text-[10px] font-bold text-white\"\n                    style={{ background: \"var(--teal-600)\" }}\n                  >\n                    {activeDimFilterCount}\n                  </span>\n                )}\n              </button>\n            </div>\n          </div>\n\n          {/* Dimension Filters Panel */}\n          {filtersOpen && (\n            <div className=\"mt-4 pt-4 border-t border-border\" data-testid=\"dim-filters\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <span className=\"text-[11px] font-semibold text-muted-foreground uppercase tracking-wide\">\n                  Dimension Filters\n                </span>\n                {activeDimFilterCount > 0 && (\n                  <button\n                    onClick={clearAllDimFilters}\n                    className=\"text-[12px] text-muted-foreground hover:text-foreground transition-colors\"\n                    data-testid=\"button-clear-filters\"\n                  >\n                    Clear all\n                  </button>\n                )}\n              </div>\n              <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4\">\n                {DIMENSION_KEYS.map((dim) => {\n                  const opts = dimOptions[dim] || [];\n                  if (opts.length === 0) return null;\n                  return (\n                    <div key={dim}>\n                      <div className=\"text-[11px] font-medium text-muted-foreground mb-1.5\">\n                        {DIMENSION_LABELS[dim]}\n                      </div>\n                      <div className=\"flex flex-col gap-1\">\n                        {opts.map((val) => {\n                          const checked = dimFilters[dim]?.includes(val) ?? false;\n                          return (\n                            <label\n                              key={val}\n                              className=\"flex items-center gap-2 cursor-pointer group\"\n                              data-testid={`filter-${dim}-${val}`}\n                            >\n                              <input\n                                type=\"checkbox\"\n                                checked={checked}\n                                onChange={() => toggleDimValue(dim, val)}\n                                className=\"w-3.5 h-3.5 rounded accent-primary\"\n                              />\n                              <span className=\"text-[12px] text-muted-foreground group-hover:text-foreground transition-colors truncate\">\n                                {val}\n                              </span>\n                            </label>\n                          );\n                        })}\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {!filtersOpen && <div className=\"mb-2\" />}\n\n        {loading && (\n          <div className=\"flex items-center justify-center py-20\" data-testid=\"loading-state\">\n            <div className=\"inline-flex items-center justify-center w-10 h-10 rounded-full bg-primary/10\">\n              <svg className=\"w-5 h-5 text-primary animate-spin\" fill=\"none\" viewBox=\"0 0 24 24\">\n                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z\" />\n              </svg>\n            </div>\n          </div>\n        )}\n\n        {error && (\n          <div\n            className=\"rounded-md px-4 py-3 text-[13px] mb-4\"\n            style={{\n              background: \"var(--error-bg)\",\n              border: \"1px solid var(--error-border)\",\n              color: \"var(--error)\",\n            }}\n            data-testid=\"text-error\"\n          >\n            {error}\n          </div>\n        )}\n\n        {!loading && !error && data && data.totals.count === 0 && (\n          <div className=\"text-center py-20\" data-testid=\"empty-state\">\n            <div\n              className=\"inline-flex items-center justify-center w-12 h-12 rounded-full mb-4\"\n              style={{ background: \"var(--zinc-100)\" }}\n            >\n              <svg className=\"w-6 h-6 text-muted-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n              </svg>\n            </div>\n            <h2 className=\"text-[16px] font-semibold text-foreground mb-1\">No opportunities found</h2>\n            <p className=\"text-[13px] text-muted-foreground mb-6 max-w-md mx-auto\">\n              No data matches the selected filters. Try adjusting the date mode, time period, or dimension filters, or import opportunities from CSV.\n            </p>\n            <Link\n              href=\"/app/import\"\n              className=\"inline-flex items-center rounded-md bg-primary px-4 py-2 text-[13px] font-medium text-primary-foreground\"\n              data-testid=\"link-import-cta\"\n            >\n              <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" />\n              </svg>\n              Import Opportunities\n            </Link>\n          </div>\n        )}\n\n        {!loading && !error && data && data.totals.count > 0 && (\n          <div className=\"space-y-8\">\n\n            {/* KPI Cards */}\n            <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-4\" data-testid=\"kpi-cards\">\n              <KpiCard\n                label=\"Total Opportunities\"\n                value={String(data.totals.count)}\n                sub={`${data.totals.open} open · ${data.totals.won} won · ${data.totals.lost} lost`}\n                testId=\"kpi-total\"\n              />\n              <KpiCard\n                label=\"Win Rate\"\n                value={fmtPct(data.totals.winRate)}\n                sub={data.totals.winRate !== null ? `${data.totals.won} won of ${data.totals.won + data.totals.lost} decided` : \"No decided deals yet\"}\n                testId=\"kpi-winrate\"\n              />\n              <KpiCard\n                label=\"Avg Amount (Won)\"\n                value={fmtCurrency(data.totals.avgAmountWon)}\n                sub={data.totals.avgAmountWon !== null ? `From ${data.totals.won} won deals` : \"No won deals yet\"}\n                testId=\"kpi-avgamount\"\n              />\n              <KpiCard\n                label=\"Open Pipeline\"\n                value={String(data.totals.open)}\n                sub=\"Opportunities in progress\"\n                testId=\"kpi-open\"\n              />\n            </div>\n\n            {/* Breakdown Tables */}\n            {(() => {\n              const c = data.coverage;\n              const breakdowns = [\n                { title: \"By Champion Role\", rows: data.byRole, testId: \"breakdown-role\", dim: \"role\" as const, label: \"champion role\" },\n                { title: \"By Industry\", rows: data.byIndustry, testId: \"breakdown-industry\", dim: \"industry\" as const, label: \"industry\" },\n                { title: \"By Source\", rows: data.bySource, testId: \"breakdown-source\", dim: \"source\" as const, label: \"source\" },\n                { title: \"By Segment\", rows: data.bySegment, testId: \"breakdown-segment\", dim: \"segment\" as const, label: \"segment\" },\n                { title: \"By Country\", rows: data.byCountry, testId: \"breakdown-country\", dim: \"country\" as const, label: \"country\" },\n              ];\n              const visible = breakdowns.filter((b) => !c || c[b.dim]?.sufficient !== false);\n              const hidden = breakdowns.filter((b) => c && c[b.dim]?.sufficient === false);\n\n              // Fixed layout: Role + Industry side by side, Source full width, Segment + Country side by side\n              const role = visible.find((b) => b.dim === \"role\");\n              const industry = visible.find((b) => b.dim === \"industry\");\n              const source = visible.find((b) => b.dim === \"source\");\n              const segment = visible.find((b) => b.dim === \"segment\");\n              const country = visible.find((b) => b.dim === \"country\");\n\n              return (\n                <>\n                  {/* Row 1: Role + Industry + Source - 3 columns */}\n                  {(role || industry || source) && (\n                    <div className=\"grid gap-5 lg:grid-cols-3\">\n                      {role && <BreakdownTable title={role.title} rows={role.rows} testId={role.testId} />}\n                      {industry && <BreakdownTable title={industry.title} rows={industry.rows} testId={industry.testId} />}\n                      {source && <BreakdownTable title={source.title} rows={source.rows} testId={source.testId} />}\n                    </div>\n                  )}\n\n                  {/* Row 2: Segment + Country */}\n                  {(segment || country) && (\n                    <div className={`grid gap-5 ${segment && country ? \"lg:grid-cols-2\" : \"\"}`}>\n                      {segment && <BreakdownTable title={segment.title} rows={segment.rows} testId={segment.testId} />}\n                      {country && <BreakdownTable title={country.title} rows={country.rows} testId={country.testId} />}\n                    </div>\n                  )}\n\n                  {hidden.length > 0 && (\n                    <div\n                      className=\"rounded-md px-4 py-3\"\n                      style={{ background: \"var(--zinc-100)\", border: \"1px solid var(--zinc-200)\" }}\n                      data-testid=\"hidden-breakdowns-note\"\n                    >\n                      <p className=\"text-[12px] text-muted-foreground\">\n                        {hidden.map((b) => b.title).join(\", \")} breakdown{hidden.length > 1 ? \"s\" : \"\"} hidden:{\" \"}\n                        {hidden.map((b) => `${b.label} not provided in this dataset`).join(\"; \")}.\n                      </p>\n                    </div>\n                  )}\n                </>\n              );\n            })()}\n\n            {/* AI Analysis Section */}\n            <div\n              className=\"rounded-lg border border-border bg-card\"\n              style={{ boxShadow: \"var(--shadow-sm)\" }}\n              data-testid=\"ai-analysis-section\"\n            >\n              {/* AI Section Header */}\n              <div\n                className=\"flex items-center justify-between gap-4 px-5 py-4\"\n                style={{ borderBottom: \"1px solid var(--border)\" }}\n              >\n                <div className=\"flex items-center gap-3\">\n                  <div\n                    className=\"inline-flex items-center justify-center w-7 h-7 shrink-0\"\n                    style={{\n                      background: \"var(--teal-50)\",\n                      borderRadius: \"6px\",\n                      border: \"1px solid var(--teal-200)\",\n                    }}\n                  >\n                    <svg className=\"w-3.5 h-3.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" style={{ color: \"var(--teal-600)\" }}>\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n                    </svg>\n                  </div>\n                  <div>\n                    <h3 className=\"text-[13px] font-semibold text-foreground\">AI-Powered Analysis</h3>\n                    <p className=\"text-[11px] text-muted-foreground mt-0.5\">\n                      {DATE_MODE_LABELS[dateMode]} · {PERIOD_LABELS[period]}\n                      {activeDimFilterCount > 0 && ` · ${activeDimFilterCount} filter${activeDimFilterCount > 1 ? \"s\" : \"\"} active`}\n                    </p>\n                  </div>\n                </div>\n                <button\n                  onClick={runAiAnalysis}\n                  disabled={aiLoading}\n                  className=\"inline-flex items-center gap-1.5 rounded-md px-3.5 py-2 text-[13px] font-semibold text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\n                  style={{ background: \"var(--teal-600)\" }}\n                  data-testid=\"button-ai-analyze\"\n                >\n                  {aiLoading ? (\n                    <>\n                      <svg className=\"w-3.5 h-3.5 animate-spin\" fill=\"none\" viewBox=\"0 0 24 24\">\n                        <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n                        <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z\" />\n                      </svg>\n                      Analyzing...\n                    </>\n                  ) : (\n                    <>\n                      <svg className=\"w-3.5 h-3.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                      </svg>\n                      Analyze with AI\n                    </>\n                  )}\n                </button>\n              </div>\n\n              {/* AI Content */}\n              <div className=\"p-5\">\n                {aiError && (\n                  <div\n                    className=\"rounded-md px-4 py-3 text-[13px] mb-4\"\n                    style={{\n                      background: \"var(--error-bg)\",\n                      border: \"1px solid var(--error-border)\",\n                      color: \"var(--error)\",\n                    }}\n                    data-testid=\"text-ai-error\"\n                  >\n                    {aiError}\n                  </div>\n                )}\n\n                {!aiAnalysis && !aiLoading && !aiError && (\n                  <p className=\"text-[13px] text-muted-foreground\" data-testid=\"text-ai-placeholder\">\n                    Click the button above to generate AI-powered insights for the current filters.\n                  </p>\n                )}\n\n                {aiAnalysis && (\n                  <div className=\"space-y-5\" data-testid=\"ai-results\">\n                    {/* Summary */}\n                    <div\n                      className=\"rounded-md px-4 py-3\"\n                      style={{ background: \"var(--zinc-50)\", border: \"1px solid var(--zinc-200)\" }}\n                      data-testid=\"ai-summary\"\n                    >\n                      <p className=\"text-[13px] text-foreground leading-relaxed\">{aiAnalysis.summary}</p>\n                    </div>\n\n                    {/* Stage Sections */}\n                    <div className=\"space-y-4\">\n                      <AiStageCard\n                        title=\"Open Pipeline\"\n                        section={aiAnalysis.openPipeline}\n                        variant=\"blue\"\n                        icon={\n                          <svg className=\"w-3.5 h-3.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                          </svg>\n                        }\n                        testId=\"ai-stage-open\"\n                      />\n                      <AiStageCard\n                        title=\"Closed Won\"\n                        section={aiAnalysis.closedWon}\n                        variant=\"green\"\n                        icon={\n                          <svg className=\"w-3.5 h-3.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                          </svg>\n                        }\n                        testId=\"ai-stage-won\"\n                      />\n                      <AiStageCard\n                        title=\"Closed Lost\"\n                        section={aiAnalysis.closedLost}\n                        variant=\"red\"\n                        icon={\n                          <svg className=\"w-3.5 h-3.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                          </svg>\n                        }\n                        testId=\"ai-stage-lost\"\n                      />\n                    </div>\n\n                    {/* Recommendations */}\n                    <div data-testid=\"ai-recommendations\">\n                      <h4\n                        className=\"text-[11px] font-semibold uppercase tracking-wide mb-3\"\n                        style={{ color: \"var(--zinc-500)\" }}\n                      >\n                        Recommendations\n                      </h4>\n                      <div className=\"space-y-2 max-w-2xl mx-auto\">\n                        {aiAnalysis.recommendations.map((rec, i) => (\n                          <div\n                            key={i}\n                            className=\"flex items-start gap-3 rounded-md px-4 py-3\"\n                            style={{\n                              background: \"var(--zinc-50)\",\n                              border: \"1px solid var(--zinc-200)\",\n                            }}\n                            data-testid={`ai-rec-${i}`}\n                          >\n                            <span\n                              className=\"inline-flex items-center justify-center w-5 h-5 rounded text-[11px] font-bold text-white shrink-0 mt-0.5\"\n                              style={{ background: \"var(--teal-600)\", lineHeight: \"1\" }}\n                            >\n                              {i + 1}\n                            </span>\n                            <p className=\"text-[13px] text-foreground leading-relaxed\">{rec}</p>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n\n/* ─── Stage Section Card ─── */\n\nconst STAGE_VARIANTS = {\n  blue: {\n    headerBg: \"#EFF6FF\",\n    headerBorder: \"#BFDBFE\",\n    iconBg: \"#DBEAFE\",\n    iconColor: \"#2563EB\",\n    titleColor: \"#1E3A8A\",\n    headlineColor: \"#1D4ED8\",\n  },\n  green: {\n    headerBg: \"var(--success-bg)\",\n    headerBorder: \"var(--success-border)\",\n    iconBg: \"#DCFCE7\",\n    iconColor: \"#16A34A\",\n    titleColor: \"#14532D\",\n    headlineColor: \"#15803D\",\n  },\n  red: {\n    headerBg: \"var(--error-bg)\",\n    headerBorder: \"var(--error-border)\",\n    iconBg: \"#FEE2E2\",\n    iconColor: \"#DC2626\",\n    titleColor: \"#7F1D1D\",\n    headlineColor: \"#B91C1C\",\n  },\n};\n\nconst INSIGHT_VARIANTS = {\n  strength: {\n    dot: \"var(--insight-strength)\",\n    label: \"STRENGTH\",\n    labelColor: \"var(--insight-strength)\",\n    bg: \"var(--insight-strength-bg)\",\n    border: \"var(--insight-strength-border)\",\n  },\n  risk: {\n    dot: \"var(--insight-risk)\",\n    label: \"RISK\",\n    labelColor: \"var(--insight-risk)\",\n    bg: \"var(--insight-risk-bg)\",\n    border: \"var(--insight-risk-border)\",\n  },\n  pattern: {\n    dot: \"var(--insight-pattern)\",\n    label: \"PATTERN\",\n    labelColor: \"var(--insight-pattern)\",\n    bg: \"var(--insight-pattern-bg)\",\n    border: \"var(--insight-pattern-border)\",\n  },\n};\n\nfunction AiStageCard({\n  title,\n  section,\n  variant,\n  icon,\n  testId,\n}: {\n  title: string;\n  section: AiStageSection;\n  variant: \"blue\" | \"green\" | \"red\";\n  icon: React.ReactNode;\n  testId: string;\n}) {\n  const v = STAGE_VARIANTS[variant];\n\n  return (\n    <div\n      className=\"rounded-lg overflow-hidden\"\n      style={{ border: `1px solid ${v.headerBorder}` }}\n      data-testid={testId}\n    >\n      {/* Section Header */}\n      <div\n        className=\"px-4 py-3\"\n        style={{ background: v.headerBg, borderBottom: `1px solid ${v.headerBorder}` }}\n      >\n        <div className=\"flex items-center gap-2 mb-1\">\n          <div\n            className=\"inline-flex items-center justify-center w-6 h-6 rounded-md shrink-0\"\n            style={{ background: v.iconBg, color: v.iconColor }}\n          >\n            {icon}\n          </div>\n          <h4 className=\"text-[13px] font-semibold\" style={{ color: v.titleColor }}>{title}</h4>\n        </div>\n        <p className=\"text-[12px] leading-relaxed\" style={{ color: v.headlineColor }}>{section.headline}</p>\n      </div>\n\n      {/* Insights */}\n      {section.insights.length > 0 ? (\n        <div className=\"bg-card\">\n          {section.insights.map((insight, i) => {\n            const s = INSIGHT_VARIANTS[insight.type] || INSIGHT_VARIANTS.pattern;\n            return (\n              <div\n                key={i}\n                className=\"px-4 py-3 flex gap-3\"\n                style={{\n                  borderBottom: i < section.insights.length - 1 ? \"1px solid var(--border)\" : \"none\",\n                }}\n                data-testid={`${testId}-insight-${i}`}\n              >\n                {/* Type indicator dot */}\n                <div className=\"pt-1 shrink-0\">\n                  <div\n                    className=\"w-1.5 h-1.5 rounded-full mt-1\"\n                    style={{ background: s.dot }}\n                  />\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center gap-2 mb-0.5\">\n                    <span\n                      className=\"text-[10px] font-bold tracking-wider\"\n                      style={{ color: s.labelColor }}\n                    >\n                      {s.label}\n                    </span>\n                  </div>\n                  <p className=\"text-[13px] font-medium text-foreground leading-snug\">{insight.title}</p>\n                  <p className=\"text-[12px] text-muted-foreground leading-relaxed mt-0.5\">{insight.description}</p>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      ) : (\n        <div className=\"px-4 py-3 bg-card\">\n          <p className=\"text-[12px] text-muted-foreground\">No deals in this stage for the selected filters.</p>\n        </div>\n      )}\n    </div>\n  );\n}\n\n/* ─── Shared Components ─── */\n\nfunction KpiCard({\n  label,\n  value,\n  sub,\n  testId,\n}: {\n  label: string;\n  value: string;\n  sub: string;\n  testId: string;\n}) {\n  return (\n    <div\n      className=\"rounded-lg bg-card p-5\"\n      style={{\n        border: \"1px solid var(--border)\",\n        boxShadow: \"var(--shadow-xs)\",\n      }}\n      data-testid={testId}\n    >\n      <p\n        className=\"text-[11px] font-semibold uppercase tracking-wide\"\n        style={{ color: \"var(--zinc-400)\" }}\n      >\n        {label}\n      </p>\n      <p\n        className=\"text-[28px] font-semibold tracking-tight mt-2 leading-none\"\n        style={{\n          color: \"var(--zinc-900)\",\n          letterSpacing: \"-0.5px\",\n        }}\n      >\n        {value}\n      </p>\n      <p className=\"text-[12px] text-muted-foreground mt-2\">{sub}</p>\n    </div>\n  );\n}\n\nfunction BreakdownTable({ title, rows, testId }: { title: string; rows: BreakdownRow[]; testId: string }) {\n  return (\n    <div className=\"rounded-md border border-border bg-card p-5\" data-testid={testId}>\n      <h3 className=\"text-sm font-medium text-foreground mb-3\">{title}</h3>\n      {rows.length === 0 ? (\n        <p className=\"text-xs text-muted-foreground\">No data</p>\n      ) : (\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full text-xs\">\n            <thead>\n              <tr className=\"border-b border-border\">\n                <th className=\"text-left py-2 pr-3 font-medium text-muted-foreground\">{title.replace(\"By \", \"\")}</th>\n                <th className=\"text-right py-2 px-2 font-medium text-muted-foreground\">Count</th>\n                <th className=\"text-right py-2 px-2 font-medium text-muted-foreground\">Win Rate</th>\n                <th className=\"text-right py-2 pl-2 font-medium text-muted-foreground\">Avg Amt</th>\n              </tr>\n            </thead>\n            <tbody>\n              {rows.map((row) => (\n                <tr key={row.label} className=\"border-b border-border/50\">\n                  <td className={`py-2 pr-3 font-medium ${row.label === UNKNOWN_VALUE ? \"text-muted-foreground italic\" : \"text-foreground\"}`}>\n                    {row.label}\n                  </td>\n                  <td className=\"py-2 px-2 text-right text-foreground\">{row.count}</td>\n                  <td className=\"py-2 px-2 text-right text-foreground\">{fmtPct(row.winRate)}</td>\n                  <td className=\"py-2 pl-2 text-right text-foreground\">{fmtCurrency(row.avgAmountWon)}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}